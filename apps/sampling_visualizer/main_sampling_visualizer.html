<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sampling Designs Visualizer</title>
  <link rel="stylesheet" href="../../shared/css/main.css">
  <link rel="stylesheet" href="main_sampling_visualizer.css">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
  <!-- Reusable person icon symbol for the grid -->
  <svg style="display:none;" aria-hidden="true" focusable="false">
    <symbol id="person-icon" viewBox="0 0 24 24">
      <g fill="currentColor">
        <circle cx="12" cy="5" r="3" />
        <rect x="9" y="8" width="6" height="7" rx="2" />
        <rect x="6" y="8" width="3" height="7" rx="1.5" />
        <rect x="15" y="8" width="3" height="7" rx="1.5" />
        <rect x="9" y="15" width="3" height="7" rx="1.5" />
        <rect x="12" y="15" width="3" height="7" rx="1.5" />
      </g>
    </symbol>
  </svg>

  <main class="app-main">
    <header class="intro hero-header">
      <div class="hero-header__top">
        <h1>Sampling Designs Visualizer</h1>
        <div class="hero-context">
          <span class="badge">Sampling</span>
        </div>
      </div>
      <p class="hero-header__lede">
        See how different sampling designs select people from the same population. Hundreds of individuals are shown on
        the grid; switch between simple random, stratified, cluster, systematic, and biased “convenience” sampling to
        see how each design changes the sample composition and sampling variability.
      </p>
    </header>

    <section class="test-overview" aria-labelledby="overview-heading">
      <h2 id="overview-heading">OVERVIEW &amp; CONCEPTS</h2>
      <div class="card">
        <p>
          This visualizer treats the population as a grid of individuals with clearly visible groups (colors). Each
          sampling design draws a subset of individuals and highlights them on the grid. By comparing sample
          composition and the sampling distribution of a statistic across repeated samples, you can see how design
          choices affect bias and variability.
        </p>
        <details class="intro-notes">
          <summary>Sampling designs illustrated</summary>
          <p><strong>Simple random sampling (SRS):</strong> every individual has the same chance to be selected.</p>
          <p><strong>Stratified sampling:</strong> the population is split into strata (colors), and a sample is taken
            from each stratum in proportion to its size.</p>
          <p><strong>Cluster sampling:</strong> the population is divided into clusters (blocks of the grid), and whole
            clusters are sampled. If clusters differ from one another, estimates can be biased or more variable.</p>
          <p><strong>Systematic sampling:</strong> individuals are ordered, and every k-th person is selected after a
            random start. This can work like SRS if the ordering is unrelated to the outcome, but can be biased if
            there is a hidden pattern.</p>
          <p><strong>Convenience sampling:</strong> a visibly biased sample, such as only taking individuals from one
            corner of the grid, to illustrate how easy it is to exclude parts of the population without noticing.</p>
        </details>
      </div>
    </section>

    <section class="scenario-section" aria-labelledby="scenario-heading">
      <h2 id="scenario-heading">MARKETING SCENARIOS</h2>
      <div class="card">
        <div class="scenario-controls">
          <label for="sampling-scenario-select">Load a sampling case study</label>
          <div class="scenario-controls__input">
            <select id="sampling-scenario-select">
              <option value="">Manual settings (no preset)</option>
            </select>
          </div>
        </div>
        <div id="sampling-scenario-description">
          <p>
            Use these presets to explore realistic marketing sampling situations, such as balanced segments under simple random sampling,
            oversampling a small premium segment with stratified sampling, or drawing clusters that represent geographic regions.
          </p>
        </div>
      </div>
    </section>

    <section class="input-card" aria-labelledby="population-heading">
      <h2 id="population-heading">POPULATION &amp; SAMPLING SETTINGS</h2>
      <article class="card data-entry-card">
        <div class="input-header">
          <h3>Configure the population</h3>
        </div>

        <div class="input-grid">
          <div>
            <label for="num-groups-select">Number of groups (colors)</label>
            <select id="num-groups-select">
              <option value="1">1 group</option>
              <option value="2">2 groups</option>
              <option value="3" selected>3 groups</option>
              <option value="4">4 groups</option>
              <option value="5">5 groups</option>
            </select>
            <p class="hint">Each group is shown as a distinct color on the grid.</p>
          </div>
          <div>
            <label for="population-scenario-select">Group composition</label>
            <select id="population-scenario-select">
              <option value="balanced">Balanced groups</option>
              <option value="skewedA">Group A majority</option>
              <option value="skewedB">Many small groups</option>
            </select>
            <p class="hint">Choose how concentrated or fragmented the population is across groups.</p>
          </div>
          <div>
            <label>
              <input type="checkbox" id="show-values-checkbox">
              Show numeric value inside each person
            </label>
            <p class="hint">Values (10–200) represent the metric of interest used for means.</p>
          </div>
        </div>

        <div class="input-header" style="margin-top:1rem;">
          <h3>Choose sampling design</h3>
        </div>

        <div class="input-grid">
          <div>
            <label for="sampling-design-select">Sampling design</label>
            <select id="sampling-design-select">
              <option value="srs">Simple random sampling</option>
              <option value="stratified">Stratified sampling</option>
              <option value="cluster">Cluster sampling</option>
              <option value="systematic">Systematic sampling</option>
              <option value="convenience">Convenience sampling (biased)</option>
            </select>
            <p class="hint">Switch designs to see how sample composition and variability change.</p>
          </div>
          <div>
            <label for="sample-size-input">Sample size (n)</label>
            <input type="number" id="sample-size-input" min="10" max="300" step="5" value="80">
            <p class="hint">Number of individuals selected in each sample.</p>
          </div>
        </div>

        <details class="advanced-details" style="margin-top:0.75rem;">
          <summary>Stratified sampling weights (by group)</summary>
          <p>
            When using stratified sampling, you can adjust how many sampled individuals come from each color group by setting
            relative weights below. Typically, analysts give <em>extra weight</em> to smaller subgroups (for example, a small segment or region)
            so that the sample includes enough of them for precise estimates, while using weights in analysis to adjust back to the population.
          </p>
          <div class="input-grid" style="margin-top:0.5rem;">
            <div id="strata-weight-wrapper-0" class="strata-weight-wrapper">
              <label for="strata-weight-0">Group A weight</label>
              <input type="number" id="strata-weight-0" min="0" step="0.1" value="1">
            </div>
            <div id="strata-weight-wrapper-1" class="strata-weight-wrapper">
              <label for="strata-weight-1">Group B weight</label>
              <input type="number" id="strata-weight-1" min="0" step="0.1" value="1">
            </div>
            <div id="strata-weight-wrapper-2" class="strata-weight-wrapper">
              <label for="strata-weight-2">Group C weight</label>
              <input type="number" id="strata-weight-2" min="0" step="0.1" value="1">
            </div>
            <div id="strata-weight-wrapper-3" class="strata-weight-wrapper">
              <label for="strata-weight-3">Group D weight</label>
              <input type="number" id="strata-weight-3" min="0" step="0.1" value="1">
            </div>
            <div id="strata-weight-wrapper-4" class="strata-weight-wrapper">
              <label for="strata-weight-4">Group E weight</label>
              <input type="number" id="strata-weight-4" min="0" step="0.1" value="1">
            </div>
          </div>
        </details>

        <div style="margin-top:0.75rem;">
          <button type="button" id="draw-sample-btn" class="primary">Draw one sample</button>
        </div>
        <p id="sampling-warning" class="hint"></p>
      </article>
    </section>

    <section class="visual-output" aria-labelledby="visual-output-heading">
      <h2 id="visual-output-heading">VISUAL OUTPUT</h2>
      <div class="card">
        <div class="chart-grid">
          <article class="chart-card">
            <h3>Population &amp; selected sample</h3>
            <div id="population-grid" class="population-grid"></div>
            <p id="population-summary" class="chart-note">
              The grid shows the full population. Colors represent groups; highlighted individuals are included in the
              current sample.
            </p>
          </article>
          <article class="chart-card">
            <h3>Sampling distribution of mean value</h3>
            <div id="sampling-distribution-chart" class="chart-placeholder"></div>
            <p id="sampling-distribution-note" class="chart-note">
              This chart accumulates the sample mean of the value of interest in repeated samples of the same size under the selected
              design. Compare how tightly (or loosely) the sample means cluster around the true population mean and whether some designs
              are visibly biased.
            </p>
            <div style="margin-top:0.5rem;">
              <label for="statistic-mode-select">Statistic shown</label>
              <select id="statistic-mode-select">
                <option value="overall" selected>Overall mean</option>
                <option value="subgroups">Subgroup mean by group</option>
              </select>
            </div>
            <div id="subgroup-display-container" style="margin-top:0.5rem;">
              <label for="subgroup-display-select">Subgroup display</label>
              <select id="subgroup-display-select">
                <option value="all" selected>All groups</option>
                <option value="0">Group A only</option>
                <option value="1">Group B only</option>
                <option value="2">Group C only</option>
                <option value="3">Group D only</option>
                <option value="4">Group E only</option>
              </select>
              <p class="hint">
                When showing subgroup means, you can focus on a single group to reduce visual clutter.
              </p>
            </div>
            <div style="margin-top:0.5rem;">
              <label for="num-simulations-input">Number of simulated samples</label>
              <input type="number" id="num-simulations-input" min="10" max="1000" step="10" value="200">
              <button type="button" id="simulate-many-btn" class="secondary" style="margin-left:0.5rem;">Simulate many samples</button>
              <p class="hint" style="margin-top:0.25rem;">
                In practice you draw one real sample, but simulating many samples shows the <em>sampling distribution</em>: how the statistic
                (here, the mean value) would vary if you could repeat the same design over and over on new populations drawn from the same process.
              </p>
              <label style="display:block; margin-top:0.25rem;">
                <input type="checkbox" id="show-true-mean-checkbox" checked>
                Show red reference line for the true population mean
              </label>
              <label style="display:block; margin-top:0.25rem;">
                <input type="checkbox" id="show-true-subgroup-means-checkbox">
                When showing subgroup means, add reference lines for the population mean in each group
              </label>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section class="test-results" aria-labelledby="summary-heading">
      <h2 id="summary-heading">SUMMARY &amp; INTERPRETATION</h2>
      <div class="card metrics-panel">
        <div class="metric-output">
          <span>True Group A proportion:</span>
          <span id="metric-true-prop" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Current sample Group A proportion:</span>
          <span id="metric-sample-prop" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>True mean value:</span>
          <span id="metric-true-mean" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Current sample mean value:</span>
          <span id="metric-sample-mean" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Sampling design:</span>
          <span id="metric-design" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Sample size:</span>
          <span id="metric-n" class="dynamic-value">&ndash;</span>
        </div>
      </div>

      <div class="dual-panels">
        <article class="card dual-panel">
          <h3>Design Comparison</h3>
          <p id="design-summary-text">
            Draw one sample to see how the current design selects individuals across groups. Then simulate many samples
            to compare how often the sample proportion of Group A lands near the true population proportion versus being
            systematically off to one side.
          </p>
        </article>
        <article class="card dual-panel">
          <h3>Teaching Notes</h3>
          <p id="teaching-notes-text">
            Use this visualizer to demonstrate why random and stratified designs tend to produce fair, stable estimates,
            while cluster, systematic, or convenience sampling can easily become biased when the underlying structure of
            the population interacts with the design.
          </p>
        </article>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p class="page-timestamps">Created: <span id="created-date">2025-11-25</span> &middot; Last updated:
      <span id="modified-date">2025-11-25</span>
    </p>
    <p><a href="../../index.html">Back to Stat Analysis Selection</a></p>
    <p class="citation">Cite as: Baker, Andrew. (2025). Sampling Designs Visualizer. Marketing Bivariate Tools.</p>
  </footer>

  <script src="../../shared/js/ui_utils.js"></script>
  <script src="main_sampling_visualizer.js"></script>
</body>

</html>
