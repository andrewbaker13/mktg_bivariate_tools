<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A/B Sample Size Planner &mdash; Two Means or Two Proportions</title>
  <!-- Shared design system -->
  <link rel="stylesheet" href="../../../shared/css/main.css">
  <link rel="stylesheet" href="../../../shared/css/auth_bar.css">
  <!-- App-specific overrides -->
  <link rel="stylesheet" href="main_sample_size_ab_calculator.css">
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <script src="../../../shared/js/stats_utils.js"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-290ZJ9RE04"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-290ZJ9RE04');
    </script>
</head><body>
  <div class="auth-bar">
    <div class="auth-bar__container">
      <div></div>
      <div id="auth-bar-content" class="auth-bar__links">
        <a href="../../login.html">Login</a>
        <a href="../../register.html">Create Account</a>
      </div>
    </div>
  </div>
  <main class="app-main">
    <header class="intro hero-header">
      <div class="hero-header__top">
        <h1>A/B Sample Size Planner</h1>
        <div class="hero-context">
          <span class="badge">Design tool</span>
        </div>
      </div>
      <p class="hero-header__lede">
        Plan the required sample size for A/B tests that compare two independent groups &mdash;
        either two proportions (conversion rates) or two means (continuous metrics). Explore how detectable effect size,
        baseline rates or variability, power, and confidence level change the per-group and total sample size.
      </p>
    </header>

    <section class="test-overview" aria-labelledby="test-overview-heading">
      <h2 id="test-overview-heading">TEST OVERVIEW &amp; EQUATIONS</h2>
      <div class="card">
        <p>
          This planner uses large-sample normal approximations to estimate the per-group sample size for two independent
          groups. You can work in either
          (a) two proportions (e.g., conversion rates) or
          (b) two means (e.g., average order value), with adjustable power and confidence.
        </p>
        <p class="equation">
          <strong>Two independent means (equal variance, approximate t-test):</strong><br>
          $$ n_{\text{per group}} \approx \frac{2\,(z_{1-\alpha^*} + z_{1-\beta})^2 \sigma^2}{\Delta^2} $$
          where \(\Delta = \mu_2 - \mu_1\) is the minimal effect you want to detect, \(\sigma\) is the common standard
          deviation, \(z_{1-\alpha^*}\) is the normal critical value for your test (two-sided or one-sided), and
          \(z_{1-\beta}\) is the critical value for the desired power.
        </p>
        <p class="equation">
          <strong>Two independent proportions (approximate z-test):</strong><br>
          $$ n_{\text{per group}} \approx
          \frac{\left[z_{1-\alpha^*}\sqrt{2\bar{p}(1-\bar{p})} + z_{1-\beta}\sqrt{p_1(1-p_1)+p_2(1-p_2)}\right]^2}{(p_2-p_1)^2} $$
          where \(p_1\) and \(p_2\) are the group proportions and \(\bar{p} = (p_1 + p_2)/2\).
        </p>
        <details class="intro-notes">
          <summary>Additional notes &amp; assumptions</summary>
          <p>
            These formulas assume independent observations, reasonably large samples, and approximate normality of the
            relevant test statistic. Results are planning-level: they help you understand required sample sizes before
            running an experiment, but small-sample or highly imbalanced designs may need more advanced methods.
          </p>
        </details>
      </div>
    </section>

    <section class="scenario-section" aria-labelledby="scenario-heading">
      <h2 id="scenario-heading">A/B TESTING SCENARIOS</h2>
      <div class="card">
        <div class="scenario-controls">
          <label for="scenario-select">Load a planning scenario</label>
          <div class="scenario-controls__input">
            <select id="scenario-select">
              <option value="">Manual inputs (no preset)</option>
            </select>
            <button id="scenario-download" class="secondary hidden" type="button" disabled>Download scenario notes</button>
          </div>
        </div>
          <div id="scenario-description">
            <p>
              Use presets to explore realistic A/B testing questions a marketing analyst might face, such as subject line experiments,
              landing page redesigns, or new upsell offers at checkout. Each scenario sets a baseline rate or mean, a minimum
              effect that would justify a rollout, and default confidence/power so you can see how many impressions, visits, or
              orders you would need before calling a winner.
            </p>
          </div>
      </div>
    </section>

    <section class="input-card" aria-labelledby="inputs-heading">
      <h2 id="inputs-heading">INPUTS &amp; SETTINGS</h2>
      <article class="card data-entry-card">
        <div class="input-header">
          <h3>Specify the A/B test</h3>
        </div>

        <div class="mode-toggle" role="tablist" aria-label="Outcome type">
          <button type="button" class="mode-button active" data-mode="proportion">Two proportions</button>
          <button type="button" class="mode-button" data-mode="mean">Two means</button>
        </div>

        <div class="mode-panels">
          <div class="mode-panel active" data-mode="proportion" id="panel-proportion">
            <article class="group-controls">
              <h4>Two proportions (e.g., A/B conversion rates)</h4>
              <div class="input-grid">
                <div>
                  <label for="p1-input">Baseline proportion \(p_1\) (Group A)</label>
                  <div class="row">
                    <input id="p1-range" type="range" min="0" max="1" step="0.01" value="0.20">
                    <input id="p1-input" type="number" min="0" max="1" step="0.01" value="0.20">
                  </div>
                  <p class="hint">Use last campaign's conversion rate or open rate as your baseline.</p>
                </div>
                <div>
                  <label for="p2-input">Variant proportion \(p_2\) (Group B)</label>
                  <div class="row">
                    <input id="p2-range" type="range" min="0" max="1" step="0.01" value="0.25">
                    <input id="p2-input" type="number" min="0" max="1" step="0.01" value="0.25">
                  </div>
                  <p class="hint">Minimum effect you care about (e.g., from 20% to 25%).</p>
                </div>
              </div>
              <p class="hint">
                The detectable lift is \(\Delta_p = p_2 - p_1\). The planner will compute the per-group sample size
                needed to detect at least this difference with your chosen power and confidence.
              </p>
            </article>
          </div>

          <div class="mode-panel" data-mode="mean" id="panel-mean">
            <article class="group-controls">
              <h4>Two means (e.g., order value or time on site)</h4>
              <div class="input-grid">
                <div>
                  <label for="mean1-input">Expected mean \(\mu_1\) (Group A)</label>
                  <input id="mean1-input" type="number" step="0.01" value="50">
                </div>
                <div>
                  <label for="mean2-input">Expected mean \(\mu_2\) (Group B)</label>
                  <input id="mean2-input" type="number" step="0.01" value="55">
                </div>
              </div>
              <div class="input-grid" style="margin-top:0.75rem;">
                <div>
                  <label for="mean-sigma-input">Estimated common standard deviation \(\sigma\)</label>
                  <input id="mean-sigma-input" type="number" min="0" step="0.01" value="15">
                  <p class="hint">Use prior data or a pilot to approximate variability.</p>
                  <details class="advanced-details" style="margin-top:0.5rem;">
                    <summary>Help me estimate \(\sigma\) from a range</summary>
                    <p>
                      If you only have a rough sense of the minimum and maximum values you expect, you can use the
                      rule-of-thumb that, for approximately bell-shaped data, most observations fall within about
                      \(\pm 2\sigma\) of the mean. That implies the total range is roughly \(4\sigma\), so
                      \(\sigma \approx \frac{\text{max} - \text{min}}{4}\).
                    </p>
                    <div class="input-grid">
                      <div>
                        <label for="mean-range-min">Expected minimum value</label>
                        <input id="mean-range-min" type="number" step="0.01" placeholder="e.g., 0">
                      </div>
                      <div>
                        <label for="mean-range-max">Expected maximum value</label>
                        <input id="mean-range-max" type="number" step="0.01" placeholder="e.g., 100">
                      </div>
                    </div>
                    <button type="button" id="mean-range-estimate-btn" class="secondary" style="margin-top:0.5rem;">
                      Estimate \(\sigma\) from range
                    </button>
                    <p class="hint">
                      This will set \(\sigma\) to \((\text{max} - \text{min}) / 4\). Use it as a starting point and
                      refine with pilot data when available. This is especially handy for bounded marketing survey
                      scales (for example, a 1â€“7 satisfaction rating), where the minimum and maximum are known.
                    </p>
                  </details>
                </div>
              </div>
              <p class="hint">
                The detectable difference in means is \(\Delta_\mu = \mu_2 - \mu_1\). The planner will estimate the
                per-group sample size needed to detect at least this shift.
              </p>
            </article>
          </div>
        </div>

        <div class="input-grid" style="margin-top:1rem;">
          <div>
            <label>Confidence level</label>
            <div class="confidence-buttons" aria-label="Confidence level">
              <button class="confidence-button" data-level="0.90">90% Conf.</button>
              <button class="confidence-button active" data-level="0.95">95% Conf.</button>
              <button class="confidence-button" data-level="0.99">99% Conf.</button>
            </div>
            <label for="alpha" style="margin-top:0.25rem;">Significance level (&alpha;)</label>
            <input type="number" id="alpha" min="0.001" max="0.2" step="0.001" value="0.050">
            <p class="hint">Confidence and alpha are linked: confidence = 1 - alpha (for two-sided tests).</p>
          </div>
          <div>
            <label for="power">Desired power</label>
            <input type="number" id="power" min="0.5" max="0.99" step="0.01" value="0.80">
            <p class="hint">Common choices are 80% or 90% power.</p>
          </div>
        </div>

        <details class="advanced-details" style="margin-top:0.75rem;">
          <summary>Advanced settings</summary>
          <div class="input-grid" style="margin-top:0.5rem;">
            <div>
              <label for="sidedness">Test type</label>
              <select id="sidedness">
                <option value="two">Two-sided (default)</option>
                <option value="one">One-sided</option>
              </select>
              <p class="hint">
                Two-sided tests are standard when any increase or decrease is important. One-sided tests focus on a
                directional improvement but assume you would not act on a decrease.
              </p>
            </div>
            <div>
              <label for="allocation-ratio">Allocation ratio (Group B : Group A)</label>
              <select id="allocation-ratio">
                <option value="1">1 : 1 (equal allocation)</option>
                <option value="1.5">1.5 : 1</option>
                <option value="2">2 : 1</option>
                <option value="0.5">1 : 2</option>
                <option value="0.33">1 : 3</option>
                <option value="3">3 : 1</option>
              </select>
              <p class="hint">
                Use unequal allocation when you want to expose more traffic to the new variant or limit exposure to
                a risky treatment. Equal allocation is simplest and most efficient when costs are similar.
              </p>
            </div>
          </div>
        </details>

        <details class="intro-notes" style="margin-top:0.5rem;">
          <summary>Additional info about these settings</summary>
          <p>
            <strong>Confidence level &amp; alpha:</strong>
            <span id="confidence-explainer-text">
              The confidence level (for example, 95%) describes how often the procedure would capture the true effect if
              you repeated the experiment many times. Alpha is the tolerated false-positive rate (for example, 5% for a
              95% confidence, two-sided test).
            </span>
          </p>
          <p>
            <strong>Power:</strong>
            <span id="power-explainer-text">
              Power is the probability that your test will detect the specified effect size if it is really present in
              the population. Higher power reduces the risk of a false negative but requires more observations.
            </span>
          </p>
          <p>
            <strong>Test type:</strong> A two-sided test checks for any difference between groups (better or worse).
            A one-sided test checks only for an improvement (or only for a decline), which can lower the required
            sample size but must be justified by the decision context.
          </p>
          <p>
            <strong>Allocation ratio:</strong> The ratio controls how many observations are assigned to Group B
            relative to Group A. A 1:1 ratio is typical for clean comparisons; unbalanced designs can be useful when
            one variant is more expensive, riskier, or more interesting to over-sample.
          </p>
        </details>
      </article>
    </section>

    <section class="visual-output" aria-labelledby="visual-output-heading">
      <h2 id="visual-output-heading">VISUAL OUTPUT</h2>
      <div class="card">
        <div class="chart-grid">
          <article class="chart-card">
            <h3>Required total sample vs. effect size</h3>
            <div class="chart-placeholder" id="chart-effect"></div>
            <p id="chart-effect-note" class="chart-note">
              This chart shows how required total sample size changes as the effect size gets larger. For proportions,
              the x-axis is \(|p_2 - p_1|\) (difference in rates); for means, it is \(|\mu_2 - \mu_1|\).
            </p>
          </article>
            <article class="chart-card">
              <h3>Required total sample vs. power</h3>
              <div class="chart-placeholder" id="chart-power"></div>
              <p id="chart-power-note" class="chart-note">
                This chart plots required sample size against desired power, holding other inputs fixed. Higher power
                (greater sensitivity) always requires a larger sample size.
              </p>
            </article>
            <article class="chart-card">
              <h3>Required total sample vs. variability</h3>
              <div class="chart-placeholder" id="chart-variability"></div>
              <p id="chart-variability-note" class="chart-note">
                This chart shows how assumptions about variability affect the required sample size: for proportions,
                different baselines \(p_1\); for means, different values of the common standard deviation \(\sigma\).
              </p>
            </article>
        </div>
      </div>
    </section>

    <section class="test-results" aria-labelledby="test-results-heading">
      <h2 id="test-results-heading">DESIGN SUMMARY</h2>
      <div class="card metrics-panel">
        <div class="metric-output">
          <span>Required n (Group A):</span>
          <span id="metric-n1" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Required n (Group B):</span>
          <span id="metric-n2" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Total sample size (N):</span>
          <span id="metric-ntotal" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Outcome type:</span>
          <span id="metric-mode" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Test / Power:</span>
          <span id="metric-test" class="dynamic-value">&ndash;</span>
        </div>
      </div>

      <div class="dual-panels">
        <article class="card dual-panel">
          <h3>APA-Style Planning Statement</h3>
          <p id="apa-report">
            Provide baseline values, effect size, confidence, and power above to generate an APA-style statement
            summarizing the required sample size per group.
          </p>
        </article>
        <article class="card dual-panel">
          <h3>Managerial Interpretation</h3>
          <p id="managerial-report">
            This panel will translate the design into plain language, explaining how many observations you need in each
            arm of the A/B test, and how that depends on the effect size, baseline, power, and confidence.
          </p>
        </article>
      </div>
    </section>

    <section class="diagnostics-section" aria-labelledby="diagnostics-heading">
      <h2 id="diagnostics-heading">DIAGNOSTICS &amp; ASSUMPTIONS</h2>
      <div class="card">
        <details class="diagnostics-details">
          <summary>Diagnostics &amp; Assumption Checks</summary>
          <div id="diagnostics-content">
            <p>
              These sample size formulas assume independent observations in each group, stable baselines, and that the
              two groups only differ through the treatment / variant. When outcomes are rare, highly skewed, or
              overdispersed, or when you use repeated measures or clustering, consult more advanced designs
              (e.g., mixed models or cluster-randomized power calculations).
            </p>
            <p>
              If the required sample size is infeasible, you can look for a larger effect size to target, lower the
              required power (e.g., from 90% to 80%), or accept a higher alpha (with clear communication of the tradeoffs).
            </p>
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p class="page-timestamps">Created: <span id="created-date">2025-11-21</span> &middot; Last updated:
      <span id="modified-date">2025-11-21</span>
    </p>
    <p><a href="../../index.html">Back to Stat Analysis Selection</a></p>
    <p class="citation">Cite as: Baker, Andrew. (2025). A/B Sample Size Planner (Two Means / Two Proportions). Marketing
      Bivariate Tools.</p>
  </footer>

  <script src="../../../shared/js/ui_utils.js"></script>
  <script src="../../../shared/js/auth_tracking.js"></script>
  <script src="../../../shared/js/auth_bar.js"></script>
  <script src="../../../shared/js/quiz_utils.js"></script>
  <script src="main_sample_size_ab_calculator.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      initQuizButton('sample_size_AB_calculator');
    });
  </script>
</body>

</html>
