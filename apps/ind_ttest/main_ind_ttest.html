<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welch's t-test Tool</title>
    <link rel="stylesheet" href="../../shared/css/main.css">
    <link rel="stylesheet" href="main_ind_ttest.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <header class="intro hero-header">
        <div class="hero-header__top">
            <h1>Welch's t-test Tool</h1>
            <div class="hero-context">
                <span class="badge">Means tool</span>
            </div>
        </div>
        <p class="hero-header__lede">Compare means of two independent groups with fan charts and narrative insights.</p>
    </header>

    <main class="app-main">
        <section class="test-overview">
            <h2>TEST OVERVIEW &amp; EQUATIONS</h2>
            <div class="card">
                <p>The Welch t-test evaluates whether two independent group means differ when variances may be unequal.</p>
                <p class="equation">
                    <strong>Test statistic:</strong>
                    $$t = \frac{\bar{x}_1 - \bar{x}_2 - \Delta_0}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}}$$
                </p>
                <p class="equation">
                    <strong>Confidence interval:</strong>
                    $$(\bar{x}_1 - \bar{x}_2) \pm t_{\alpha/2,\,\nu} \sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}$$
                </p>
                <details class="additional-notes" style="margin-top:12px;">
                    <summary>Additional Notes</summary>
                    <p>As degrees of freedom increase, Welch's t behaves like a z-test. When samples are small or variances highly imbalanced, keep the heavier tails in mind and report the estimated power.</p>
                </details>
            </div>
        </section>

        <section class="scenario-section">
            <h2>MARKETING SCENARIOS</h2>
            <div class="card">
                <div class="scenario-controls">
                    <label for="scenario-select">Load a marketing use case:</label>
                    <select id="scenario-select">
                        <option value="">Manual inputs (no preset)</option>
                    </select>
                    <button id="scenario-download" class="secondary hidden" type="button" disabled>Download scenario dataset</button>
                </div>
                <div id="scenario-description">
                    <p>
                        You're leading a marketing analytics project for an e-commerce brand that is A/B testing email campaigns.
                        <span id="scenario-group1">Group 1</span> might represent subscribers who received an optimized subject line,
                        while <span id="scenario-group2">Group 2</span> saw the current control subject line. After the campaign, you
                        collected key performance indicators such as click-through rate, average order value, or downstream revenue
                        per recipient.
                    </p>
                    <p>
                        Use the tool below to plug in the sample statistics for each variant, evaluate whether the observed lift is
                        meaningful, and decide if the new creative warrants a broader rollout. Adjust the hypothesized difference to
                        model the minimum effect size that would justify marketing spend.
                    </p>
                </div>
            </div>
        </section>

        <section class="inputs-panel">
            <h2>INPUTS &amp; SETTINGS</h2>
            <div class="card data-entry-card">
                <div class="input-header">
                    <h3>Select Data Entry / Upload Mode</h3>
                </div>
                <div class="mode-toggle" role="tablist" aria-label="Data entry mode">
                    <button type="button" class="mode-button active" data-mode="manual">Manual entry</button>
                    <button type="button" class="mode-button" data-mode="summary-upload">Upload summary stats</button>
                    <button type="button" class="mode-button" data-mode="raw-upload">Upload raw data</button>
                </div>
                <div class="mode-panels">
                    <div class="mode-panel active" data-mode="manual" id="manual-panel">
                        <p class="panel-intro">Enter aggregated statistics for each group. Scenarios and uploads overwrite these fields automatically.</p>
                        <table class="group-table">
                            <thead>
                                <tr>
                                    <th scope="col">Group</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Mean (&mu;)</th>
                                    <th scope="col">Std. deviation (s)</th>
                                    <th scope="col">Sample size (n)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Group 1</td>
                                    <td><input type="text" id="group1-name" value="Group 1" maxlength="40"></td>
                                    <td><input type="number" id="mean1" step="any" required></td>
                                    <td><input type="number" id="sd1" step="any" min="0" required></td>
                                    <td><input type="number" id="n1" step="1" min="2" required></td>
                                </tr>
                                <tr>
                                    <td>Group 2</td>
                                    <td><input type="text" id="group2-name" value="Group 2" maxlength="40"></td>
                                    <td><input type="number" id="mean2" step="any" required></td>
                                    <td><input type="number" id="sd2" step="any" min="0" required></td>
                                    <td><input type="number" id="n2" step="1" min="2" required></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mode-panel" data-mode="summary-upload" id="summary-panel">
                        <div class="data-import-block">
                            <h4>Upload summary inputs</h4>
                            <p>Provide a CSV/TSV with exactly two rows, including columns such as <code>group,mean,sd,n</code>. Add optional <code>delta0</code> and <code>alpha</code> columns to set the hypothesized difference and confidence level along with the stats.</p>
                            <div id="summary-dropzone" class="dropzone" role="button" tabindex="0">
                                <p class="dropzone-title">Drag &amp; drop summary file</p>
                                <p class="dropzone-note">Two groups required. Each row should describe one group.</p>
                                <button type="button" id="summary-browse" class="secondary">Browse files</button>
                            </div>
                            <input type="file" id="summary-input" accept=".csv,.tsv,.txt" hidden>
                            <div class="template-buttons">
                                <button type="button" id="summary-template-download">Download summary template</button>
                            </div>
                            <p id="summary-upload-status" class="upload-status" aria-live="polite">No summary file uploaded.</p>
                        </div>
                    </div>
                    <div class="mode-panel" data-mode="raw-upload" id="raw-panel">
                        <div class="data-import-block">
                            <h4>Upload raw data</h4>
                            <p>Upload a long-format file with columns like <code>group,value</code>. We&rsquo;ll calculate the means, standard deviations, and sample sizes for the first two groups discovered.</p>
                            <div id="raw-dropzone" class="dropzone" role="button" tabindex="0">
                                <p class="dropzone-title">Drag &amp; Drop raw data file (.csv, .tsv, .txt)</p>
                                <p class="dropzone-note">Long format with headers like <code>group,value</code>; at least two unique groups. Up to 2,000 rows.</p>
                                <button type="button" id="raw-browse" class="secondary">Browse files</button>
                            </div>
                            <input type="file" id="raw-input" accept=".csv,.tsv,.txt" hidden>
                            <div class="template-buttons">
                                <button type="button" id="raw-template-download">Download raw template</button>
                            </div>
                            <p id="raw-upload-status" class="upload-status" aria-live="polite">No raw file uploaded.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card analysis-settings">
                <h3>Analysis Settings</h3>
                <div class="analysis-grid">
                    <div class="analysis-control">
                        <div class="input-group">
                            <label for="delta0">Hypothesized difference (&Delta;<sub>0</sub>)</label>
                            <input type="number" id="delta0" step="any" value="0">
                        </div>
                        <div class="input-group">
                            <label for="alpha">Significance level (&alpha;)</label>
                            <input type="number" id="alpha" min="0.001" max="0.25" step="0.001" value="0.050">
                        </div>
                    </div>
                    <div class="confidence-buttons" role="group" aria-label="Select confidence level">
                        <button type="button" class="confidence-button" data-level="0.90">90% Conf.</button>
                        <button type="button" class="confidence-button active" data-level="0.95">95% Conf.</button>
                        <button type="button" class="confidence-button" data-level="0.99">99% Conf.</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="visual-output">
            <h2>VISUAL OUTPUT</h2>
            <div class="card visualization-wrapper">
                <article class="chart-card" aria-labelledby="means-chart-title">
                    <h3 id="means-chart-title">Means Fan Chart</h3>
                    <div id="means-chart" class="plot-container" role="img" aria-live="polite" aria-label="Fan chart showing group means and confidence intervals"></div>
                    <div id="means-narrative" class="chart-narrative" aria-live="polite"></div>
                </article>
                <article class="chart-card" aria-labelledby="diff-chart-title">
                    <h3 id="diff-chart-title">Difference Fan Chart</h3>
                    <div id="difference-chart" class="plot-container" role="img" aria-live="polite" aria-label="Fan chart showing difference in means and confidence intervals"></div>
                    <div id="difference-narrative" class="chart-narrative" aria-live="polite"></div>
                </article>
            </div>

            <div class="visual-output-section card" aria-label="Visual Output Settings">
                <details>
                    <summary>Visual Output Settings</summary>
                    <div class="axis-settings">
                        <div class="axis-card">
                            <h3>Means Fan Chart</h3>
                            <label class="switch-label">
                                <input type="checkbox" id="means-axis-lock">
                                <span>Lock axis to custom range</span>
                            </label>
                            <div class="range-inputs">
                                <div class="input-group inline">
                                    <label for="means-axis-min">Min:</label>
                                    <input type="number" id="means-axis-min" step="any">
                                </div>
                                <div class="input-group inline">
                                    <label for="means-axis-max">Max:</label>
                                    <input type="number" id="means-axis-max" step="any">
                                </div>
                            </div>
                        </div>
                        <div class="axis-card">
                            <h3>Difference Fan Chart</h3>
                            <fieldset>
                                <legend>Axis Mode</legend>
                                <label class="radio-label">
                                    <input type="radio" name="diff-axis-mode" value="auto" checked>
                                    <span>Auto scale</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="diff-axis-mode" value="symmetric">
                                    <span>Symmetric Axis</span>
                                </label>
                                <div class="input-group inline">
                                    <label for="diff-axis-symmetric">Bound:</label>
                                    <input type="number" id="diff-axis-symmetric" step="any">
                                </div>
                                <label class="radio-label">
                                    <input type="radio" name="diff-axis-mode" value="custom">
                                    <span>Custom range</span>
                                </label>
                                <div class="range-inputs">
                                    <div class="input-group inline">
                                        <label for="diff-axis-min">Min:</label>
                                        <input type="number" id="diff-axis-min" step="any">
                                    </div>
                                    <div class="input-group inline">
                                        <label for="diff-axis-max">Max:</label>
                                        <input type="number" id="diff-axis-max" step="any">
                                    </div>
                                </div>
                            </fieldset>
                            <button id="reset-axis" type="button" class="secondary">Reset Axis Controls</button>
                        </div>
                    </div>
                </details>
            </div>
        </section>

        <section class="test-results" aria-labelledby="test-results-heading">
            <h2 id="test-results-heading">TEST RESULTS</h2>
            <div class="dual-panels">
                <article class="card dual-panel">
                    <h3>APA-Style Statistical Reporting</h3>
                    <p id="apa-report"></p>
                </article>
                <article class="card dual-panel">
                    <h3>Managerial Interpretation</h3>
                    <p id="managerial-report"></p>
                </article>
            </div>

            <div class="card interpretation-card" aria-live="polite">
                <div id="interpretation"></div>
            </div>

            <div class="card summary-section" aria-live="polite">
                <h3>Summary of Estimates</h3>
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>Measure</th>
                            <th>Estimate</th>
                            <th>Standard Error</th>
                            <th id="summary-ci-lower-header">Lower Bound</th>
                            <th id="summary-ci-upper-header">Upper Bound</th>
                        </tr>
                    </thead>
                    <tbody id="summary-table-body"></tbody>
                </table>
            </div>
        </section>

        <section class="diagnostics-section">
            <h2>DIAGNOSTICS &amp; ASSUMPTIONS</h2>
            <div class="card">
                <details class="diagnostics-details">
                    <summary>Diagnostics &amp; Assumption Tests</summary>
                    <div id="diagnostics-content">
                        <p class="muted">Provide group summaries to review sample size balance, variance ratios, power, and interval diagnostics.</p>
                    </div>
                </details>
            </div>
        </section>
    </main>

      <footer class="app-footer">
        <p class="page-timestamps">Created: <span id="created-date">2025-11-06</span> &middot; Last updated: <span id="modified-date">2025-11-15</span></p>
        <p><a href="../../index.html">Back to Stat Analysis Selection</a></p>
        <p class="citation">Cite as: Baker, Andrew. (2025). Welch's t-test Tool. Marketing Bivariate Tools. https://github.com/andre/mktg_bivariate_tools/apps/ind_ttest/main_ind_ttest.html</p>
      </footer>

    <script src="../../shared/js/csv_utils.js"></script>
    <script src="../../shared/js/ui_utils.js"></script>
    <script src="../../shared/js/fan_chart_utils.js"></script>
    <script src="ind_ttest_app.js"></script>
</body>
</html>

