<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Propensity Score Matching Tool</title>
  <link rel="stylesheet" href="../../../shared/css/main.css">
  <script src="../../../shared/js/tracking.js"></script>
  <link rel="stylesheet" href="../../../shared/css/auth_bar.css">
  <link rel="stylesheet" href="main_ps_matching.css">
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <script src="../../../shared/js/predictor_utils.js"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-290ZJ9RE04"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-290ZJ9RE04');
  </script>
</head>

<body>
  <div class="auth-bar">
    <div class="auth-bar__container">
      <div></div>
      <div id="auth-bar-content" class="auth-bar__links">
        <a href="../../../admin_pages/login.html">Login</a>
        <a href="../../../admin_pages/register.html">Create Account</a>
      </div>
    </div>
  </div>

  <header class="intro hero-header">
    <div class="hero-header__top">
      <h1>Propensity Score Matching</h1>
      <div class="hero-context">
        <span class="badge">Causal Inference</span>
      </div>
    </div>
    <p class="hero-header__lede">
      Estimate causal treatment effects from observational marketing data using propensity score matching. Upload data with a treatment indicator and outcome, select covariates for balance, and the tool performs nearest-neighbor matching to create comparable treated and control groups.
    </p>
  </header>

  <!-- Professor Mode Banner -->
  <div class="professor-mode-banner">
    <div class="professor-mode-content">
      <div class="professor-mode-info">
        <h3>üë®‚Äçüè´ Professor Mode: Guided Learning Experience</h3>
        <p>New to propensity score matching? Enable Professor Mode for step-by-step guidance through matching methods, balance diagnostics, and interpreting causal treatment effects!</p>
      </div>
      <label class="professor-mode-toggle">
        <input type="checkbox" id="professorMode">
        <span>Enable Professor Mode</span>
      </label>
    </div>
  </div>

  <main class="app-main">
    <!-- Overview Section -->
    <section class="test-overview">
      <h2>OVERVIEW &amp; APPROACH</h2>
      <div class="card">
        <p>
          <strong>Propensity Score Matching (PSM)</strong> is a technique for estimating causal effects from observational data. When we cannot randomly assign treatment (e.g., who receives a marketing campaign), treated and control groups may differ systematically. PSM addresses this by matching each treated unit to control units with similar <em>propensity scores</em>&mdash;the probability of receiving treatment given observed covariates.
        </p>
        <p class="equation">
          <strong>Step 1 &ndash; Propensity Score Model:</strong>
          $$ e(X_i) = \Pr(T_i = 1 \mid X_i) = \text{logit}^{-1}(\beta_0 + \beta_1 X_{1i} + \dots + \beta_p X_{pi}) $$
          We fit a logistic regression predicting treatment \(T\) from covariates \(X\). The fitted probability \(\hat{e}(X_i)\) is the propensity score.
        </p>
        <p class="equation">
          <strong>Step 2 &ndash; Matching:</strong>
          For each treated unit, find the control unit(s) with the closest propensity score. This creates a matched sample where treated and control groups are balanced on covariates.
        </p>
        <p class="equation">
          <strong>Step 3 &ndash; Treatment Effect:</strong>
          $$ \text{ATT} = \frac{1}{n_1} \sum_{T_i=1} \left[ Y_i - Y_{j(i)} \right] $$
          The <em>Average Treatment Effect on the Treated</em> (ATT) compares outcomes between each treated unit and its matched control(s).
        </p>
        <details class="additional-notes">
          <summary>When to use propensity score matching</summary>
          <p>
            PSM is appropriate when you have observational data where treatment was <em>not</em> randomly assigned (e.g., customers who self-selected into a loyalty program, users who happened to see an ad). You need: (1) a binary treatment indicator, (2) an outcome you want to measure the treatment effect on, and (3) covariates that predict treatment assignment and may confound the treatment-outcome relationship.
          </p>
          <p class="muted">
            <strong>Key limitation:</strong> PSM only adjusts for <em>observed</em> covariates. If unobserved factors influence both treatment and outcome (hidden confounding), the estimated effect may still be biased. This is why good causal reasoning and domain knowledge are essential.
          </p>
        </details>
        <details class="additional-notes">
          <summary>Interpreting the Average Treatment Effect on the Treated (ATT)</summary>
          <p>
            The ATT answers: "Among those who received treatment, what was the average effect compared to similar untreated individuals?" This is often the most policy-relevant question (e.g., "Did the campaign lift sales among people we actually targeted?").
          </p>
          <p class="muted">
            Note: ATT differs from ATE (Average Treatment Effect), which estimates the effect across the entire population. PSM with 1:1 matching typically estimates ATT.
          </p>
        </details>
      </div>
    </section>

    <!-- Scenario Section -->
    <section class="scenario-section">
      <h2>MARKETING SCENARIOS</h2>
      <div class="card">
        <div class="scenario-controls">
          <label for="scenario-select">Load a matching scenario:</label>
          <div class="scenario-controls__input">
            <select id="scenario-select">
              <option value="">Manual inputs (no preset)</option>
            </select>
            <button id="scenario-download" class="secondary hidden" type="button" disabled>
              Download scenario dataset
            </button>
          </div>
        </div>
        <div id="scenario-description">
          <p>
            Use presets to explore causal inference scenarios, such as <em>loyalty program enrollment</em> or <em>email campaign exposure</em>.
            Each scenario provides a raw data file with treatment, outcome, and covariates.
          </p>
        </div>
      </div>
    </section>

    <!-- Data Input Section -->
    <section class="inputs-panel">
      <h2>DATA &amp; VARIABLE SELECTION</h2>
      
      <div class="card data-entry-card">
        <div class="input-header">
          <h3>Upload Raw Data File</h3>
        </div>
        <p class="panel-intro">
          Upload a CSV file with case-level data including: a binary treatment indicator (0/1), an outcome variable, and covariates for matching. Headers are required.
        </p>
        <div class="dropzone" id="raw-dropzone" role="button" tabindex="0">
          <p class="dropzone-title">Drag &amp; Drop raw data file (.csv, .tsv, .txt)</p>
          <p class="dropzone-note">Include headers; must have treatment (binary), outcome, and covariate columns.</p>
          <button type="button" id="raw-browse" class="secondary">Browse files</button>
        </div>
        <input type="file" id="raw-input" accept=".csv,.tsv,.txt" hidden>
        
        <div class="template-buttons">
          <button type="button" id="raw-template-download">Download CSV template</button>
        </div>
        <p class="upload-status" id="raw-upload-status">No file uploaded.</p>
      </div>

      <!-- Variable Selection Panel -->
      <div id="variable-selection-panel" class="card variable-selection-panel hidden">
        <h3>Assign Variables for Matching</h3>
        <p>Select your treatment indicator, outcome variable, and covariates to balance on.</p>
        
        <div class="variable-selectors-grid psm-grid">
          <!-- Treatment Variable -->
          <div class="variable-column">
            <label for="treatment-select"><strong>Treatment Variable</strong> (binary)</label>
            <select id="treatment-select">
              <option value="">-- Select treatment --</option>
            </select>
            <div id="treatment-focal-wrapper" class="muted small hidden" style="margin-top: 0.5rem;">
              <label for="treatment-focal-select">Treated group (coded as 1):</label>
              <select id="treatment-focal-select"></select>
            </div>
            <p id="treatment-coding-note" class="muted" style="margin-top: 0.25rem;"></p>
          </div>
          
          <!-- Outcome Variable -->
          <div class="variable-column">
            <label for="outcome-select"><strong>Outcome Variable</strong></label>
            <select id="outcome-select">
              <option value="">-- Select outcome --</option>
            </select>
            <p class="muted small">Can be binary (0/1) or continuous. The ATT will measure the treatment effect on this variable.</p>
          </div>
          
          <!-- Covariates -->
          <div class="variable-column covariates-column">
            <label><strong>Covariates</strong> (for propensity model)</label>
            <p class="muted small">Select variables that may confound the treatment-outcome relationship.</p>
            <div id="covariate-list" class="predictor-list stacked"></div>
          </div>
        </div>
        
        <div id="assignment-summary" class="muted" style="margin-top: 1rem;"></div>
        <p id="input-status" class="muted"></p>
        <p id="row-filter-status" class="muted"></p>
      </div>

      <!-- Matching Options -->
      <div id="matching-options-panel" class="card hidden">
        <h3>Matching Options</h3>
        <div class="matching-options-grid">
          <div class="matching-option">
            <label for="matching-method">Matching Method</label>
            <select id="matching-method">
              <option value="nearest" selected>Nearest Neighbor (1:1)</option>
              <option value="nearest-k">Nearest Neighbor (1:k)</option>
              <option value="caliper">Caliper Matching</option>
            </select>
          </div>
          
          <div class="matching-option" id="k-matches-wrapper" style="display:none;">
            <label for="k-matches">Number of matches (k)</label>
            <input type="number" id="k-matches" min="1" max="10" value="3" step="1">
          </div>
          
          <div class="matching-option" id="caliper-wrapper">
            <label for="caliper-width">Caliper Width</label>
            <input type="number" id="caliper-width" min="0.05" max="1" value="0.25" step="0.05">
            <p class="muted small">Maximum PS difference for a valid match. 0.25 is recommended; increase if few matches are found.</p>
          </div>
          
          <div class="matching-option">
            <label>
              <input type="checkbox" id="with-replacement" checked>
              <span>Match with replacement</span>
            </label>
            <p class="muted small">Allow control units to be matched to multiple treated units.</p>
          </div>
        </div>
        
        <button type="button" id="run-matching-btn" class="primary" style="margin-top: 1rem;">
          Run Matching Analysis
        </button>
      </div>
    </section>

    <!-- Propensity Score Diagnostics -->
    <section class="visual-output" aria-labelledby="visual-output-heading">
      <h2 id="visual-output-heading">PROPENSITY SCORE DIAGNOSTICS</h2>
      <div class="card">
        <!-- Propensity Score Distribution -->
        <article class="chart-card">
          <h3>Propensity Score Distribution</h3>
          <div id="plot-ps-distribution" class="chart-placeholder" role="img" aria-live="polite"
            aria-label="Histogram of propensity scores by treatment status."></div>
          <p id="plot-ps-distribution-caption" class="chart-note"></p>
          <details class="interpretation-aid">
            <summary>Interpretation Aid</summary>
            <div class="interpretation-content">
              <h4>Technical Interpretation</h4>
              <p class="muted">
                <strong>What you're seeing:</strong> The histograms show the distribution of estimated propensity scores for treated (blue) and control (orange) groups. Each propensity score represents the predicted probability that a unit received treatment, based on its covariate values.
              </p>
              <p class="muted">
                <strong>Good overlap:</strong> When both distributions cover similar ranges (e.g., both spanning 0.2‚Äì0.8), matching can find comparable units. The key assumption of PSM‚Äîthat we can find similar treated and control units‚Äîis satisfied.
              </p>
              <p class="muted">
                <strong>Warning signs:</strong> If treated units cluster near 1.0 and controls near 0.0 with little overlap, the propensity model is "perfectly predicting" treatment. This means groups are fundamentally different on observed characteristics, and matching will fail or produce few matches.
              </p>
              
              <h4>Practical Interpretation</h4>
              <p class="muted">
                <strong>Marketing example:</strong> In a loyalty program analysis, if customers who enrolled all have very high propensity scores while non-enrollees have very low scores, it means enrolled customers were systematically different (e.g., higher prior spend, more visits). Finding a "fair comparison" will be difficult.
              </p>
              <p class="muted">
                <strong>What to do if overlap is poor:</strong> (1) Use fewer or different covariates, (2) collect more data, or (3) consider that the treatment effect may not be estimable with this data‚Äîthe groups are too different to compare.
              </p>
            </div>
          </details>
        </article>
        
        <!-- Balance Plot (Love Plot) -->
        <article class="chart-card">
          <h3>Covariate Balance: Before vs. After Matching</h3>
          <div id="plot-balance" class="chart-placeholder" role="img" aria-live="polite"
            aria-label="Love plot showing standardized mean differences before and after matching."></div>
          <p id="plot-balance-caption" class="chart-note"></p>
          <details class="interpretation-aid">
            <summary>Interpretation Aid</summary>
            <div class="interpretation-content">
              <h4>Technical Interpretation</h4>
              <p class="muted">
                <strong>Standardized Mean Difference (SMD):</strong> Each point shows how different treated and control groups are on a covariate, measured in pooled standard deviation units. An SMD of 0.2 means the groups differ by 0.2 standard deviations on that variable.
              </p>
              <p class="muted">
                <strong>Balance thresholds:</strong> SMD &lt; 0.1 indicates excellent balance (green zone). SMD 0.1‚Äì0.25 is acceptable but shows residual imbalance (yellow). SMD &gt; 0.25 suggests meaningful differences that may bias the ATT estimate (red).
              </p>
              <p class="muted">
                <strong>Before vs. After:</strong> Open circles show pre-matching imbalance; filled circles show post-matching balance. Successful matching moves all points toward zero (the center dashed line).
              </p>
              
              <h4>Practical Interpretation</h4>
              <p class="muted">
                <strong>What it tells you:</strong> This "Love Plot" shows whether matching created comparable groups. If all filled circles (after matching) are within the ¬±0.1 bands, you can be confident that treated and matched control groups are similar on observed characteristics.
              </p>
              <p class="muted">
                <strong>Marketing example:</strong> If "Prior_Spend" has SMD = 0.5 before matching (treated spent more) but SMD = 0.05 after matching, the matched comparison controls for prior spending behavior. The ATT now compares customers with similar spending histories.
              </p>
              <p class="muted">
                <strong>Action:</strong> If any covariate remains imbalanced (SMD &gt; 0.25) after matching, consider adding it to the outcome model or interpreting results cautiously‚Äîremaining confounding may bias the effect estimate.
              </p>
            </div>
          </details>
        </article>
      </div>
    </section>

    <!-- Matching Summary Section -->
    <section class="matching-summary-section" aria-labelledby="matching-summary-heading">
      <h2 id="matching-summary-heading">MATCHING SUMMARY</h2>
      <div class="card">
        <div class="matching-stats-grid">
          <div class="stat-item">
            <span class="stat-label">Treated Units</span>
            <span class="stat-value" id="stat-n-treated">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Control Units</span>
            <span class="stat-value" id="stat-n-control">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Matched Pairs</span>
            <span class="stat-value" id="stat-matched-pairs">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Unmatched Treated</span>
            <span class="stat-value" id="stat-unmatched">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Mean PS (Treated)</span>
            <span class="stat-value" id="stat-mean-ps-treated">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Mean PS (Matched Control)</span>
            <span class="stat-value" id="stat-mean-ps-control">--</span>
          </div>
        </div>
        
        <div id="matching-quality-note" class="muted" style="margin-top: 1rem;"></div>
        
        <details class="interpretation-aid">
          <summary>Understanding Matching Quality</summary>
          <div class="interpretation-content">
            <h4>Technical Interpretation</h4>
            <p class="muted">
              <strong>Matched pairs:</strong> The number of treated units successfully matched to control units within the caliper threshold. This determines the effective sample size for ATT estimation.
            </p>
            <p class="muted">
              <strong>Unmatched treated:</strong> Treated units outside the "common support" region‚Äîthey have propensity scores too extreme to find comparable controls. High unmatched rates (&gt;20%) suggest limited overlap.
            </p>
            <p class="muted">
              <strong>Mean propensity scores:</strong> After matching, mean PS should be nearly identical between treated and matched controls. Differences &gt; 0.05 suggest residual imbalance.
            </p>
            
            <h4>Practical Interpretation</h4>
            <p class="muted">
              <strong>Sample size trade-off:</strong> PSM often discards observations (unmatched treated or unused controls). A match rate of 80%+ is typically good; below 50% suggests the groups may be too different for meaningful comparison.
            </p>
            <p class="muted">
              <strong>Who gets excluded:</strong> Unmatched treated units are often "extreme" cases‚Äîe.g., customers with very high engagement who enrolled in a program but have no comparable non-enrollees. The ATT estimate applies only to the matched subset, which may differ from all treated units.
            </p>
            <p class="muted">
              <strong>Generalizability:</strong> If many treated units are excluded, ask: "Can I generalize the treatment effect to the excluded cases?" If they're systematically different, the answer may be no.
            </p>
          </div>
        </details>
      </div>
    </section>

    <!-- Covariate Balance Table -->
    <section class="balance-section" aria-labelledby="balance-heading">
      <h2 id="balance-heading">COVARIATE BALANCE TABLE</h2>
      <div class="card">
        <h3>Standardized Mean Differences</h3>
        <table class="summary-table balance-table">
          <thead>
            <tr>
              <th>Covariate</th>
              <th>Mean (Treated)</th>
              <th>Mean (Control)</th>
              <th>SMD Before</th>
              <th>Mean (Matched Ctrl)</th>
              <th>SMD After</th>
              <th>% Reduction</th>
            </tr>
          </thead>
          <tbody id="balance-table-body">
            <tr><td colspan="7">Run matching to see balance diagnostics.</td></tr>
          </tbody>
        </table>
        <p class="muted" style="margin-top: 0.75rem;">
          <strong>SMD interpretation:</strong> |SMD| &lt; 0.1 = excellent balance (green), 0.1&ndash;0.25 = acceptable (yellow), &gt; 0.25 = concerning (red).
        </p>
        <details class="interpretation-aid">
          <summary>About Standardized Mean Differences</summary>
          <div class="interpretation-content">
            <h4>Technical Interpretation</h4>
            <p class="muted">
              <strong>What SMD measures:</strong> The difference in means between treated and control groups, divided by the pooled standard deviation: SMD = (Mean_Treated - Mean_Control) / SD_pooled. This makes the measure unit-free and comparable across variables.
            </p>
            <p class="muted">
              <strong>For categorical variables:</strong> Each category level is treated as a 0/1 indicator, and SMD is calculated for the proportion in each level.
            </p>
            <p class="muted">
              <strong>% Reduction:</strong> Shows how much matching improved balance. 80%+ reduction is excellent; negative reduction means matching made things worse (rare, but possible with replacement).
            </p>
            
            <h4>Practical Interpretation</h4>
            <p class="muted">
              <strong>Reading the table:</strong> Compare the "SMD Before" and "SMD After" columns. Ideally, all "SMD After" values should be near zero (green). Covariates with high SMD after matching may still confound your treatment effect estimate.
            </p>
            <p class="muted">
              <strong>Example:</strong> If "Prior_Spend" has SMD = 0.4 before matching, treated customers spent 0.4 SDs more than controls before the program. After matching (SMD = 0.05), the difference is negligible‚Äîyou're now comparing customers with similar spending histories.
            </p>
            <p class="muted">
              <strong>If balance is poor:</strong> Try adjusting matching settings (wider caliper, different covariates) or consider that selection bias may be too strong to overcome with this data.
            </p>
          </div>
        </details>
      </div>
    </section>

    <!-- Treatment Effect Results -->
    <section class="test-results" aria-labelledby="test-results-heading">
      <h2 id="test-results-heading">TREATMENT EFFECT RESULTS</h2>

      <div class="card treatment-effect-card">
        <h3>Average Treatment Effect on the Treated (ATT)</h3>
        <div class="att-display">
          <div class="att-main">
            <span class="att-label">Estimated ATT:</span>
            <span class="att-value" id="att-estimate">--</span>
          </div>
          <div class="att-details">
            <div class="att-detail">
              <span class="label">Standard Error:</span>
              <span id="att-se">--</span>
            </div>
            <div class="att-detail">
              <span class="label">95% CI:</span>
              <span id="att-ci">--</span>
            </div>
            <div class="att-detail">
              <span class="label">t-statistic:</span>
              <span id="att-tstat">--</span>
            </div>
            <div class="att-detail">
              <span class="label">p-value:</span>
              <span id="att-pvalue">--</span>
            </div>
          </div>
        </div>
        
        <div class="outcome-means-grid" style="margin-top: 1.5rem;">
          <div class="outcome-mean">
            <span class="label">Mean Outcome (Treated):</span>
            <span id="mean-outcome-treated">--</span>
          </div>
          <div class="outcome-mean">
            <span class="label">Mean Outcome (Matched Control):</span>
            <span id="mean-outcome-control">--</span>
          </div>
        </div>
        
        <details class="interpretation-aid">
          <summary>Interpreting the ATT</summary>
          <div class="interpretation-content">
            <h4>Technical Interpretation</h4>
            <p class="muted">
              <strong>Average Treatment Effect on the Treated (ATT):</strong> The mean difference in outcomes between treated units and their matched controls: ATT = (1/n) Œ£(Y_treated - Y_matched_control). This estimates the causal effect of treatment for those who received it.
            </p>
            <p class="muted">
              <strong>Standard Error &amp; 95% CI:</strong> The SE measures uncertainty in the ATT estimate. The 95% CI means we are 95% confident the true effect lies within this range. If the CI excludes zero, the effect is statistically significant at Œ± = 0.05.
            </p>
            <p class="muted">
              <strong>t-statistic &amp; p-value:</strong> The t-stat is ATT/SE; p-value tests H‚ÇÄ: ATT = 0. p &lt; 0.05 provides evidence of a non-zero treatment effect.
            </p>
            
            <h4>Practical Interpretation</h4>
            <p class="muted">
              <strong>What the number means:</strong> If ATT = 120 for a spending outcome, treated customers spent an average of $120 more than similar untreated customers. This is the estimated causal impact of the treatment.
            </p>
            <p class="muted">
              <strong>Business decision-making:</strong> Compare the ATT to the cost of treatment. If a loyalty program costs $50/customer to run but generates ATT = $120 in additional spend, the program has positive ROI.
            </p>
            <p class="muted">
              <strong>Caution:</strong> The ATT is valid only if (1) the propensity model includes all confounders, (2) matching achieved good balance, and (3) there are no unmeasured confounders. PSM cannot prove causation‚Äîit can only adjust for observed differences.
            </p>
            <p class="muted">
              <strong>Effect size vs. significance:</strong> A large p-value with a meaningful ATT suggests insufficient sample size. A tiny p-value with a tiny ATT may be statistically significant but practically irrelevant. Always consider both.
            </p>
          </div>
        </details>
      </div>

      <div class="dual-panels">
        <article class="card dual-panel">
          <h3>Statistical Interpretation</h3>
          <p id="statistical-report">Run matching analysis to see results.</p>
        </article>
        <article class="card dual-panel">
          <h3>Managerial Takeaway</h3>
          <p id="managerial-report">Run matching analysis to see actionable insights.</p>
        </article>
      </div>
      
      <div class="card">
        <button type="button" id="download-matched-data" class="secondary" disabled>
          Download Matched Sample Data (CSV)
        </button>
        <p class="hint">
          The downloaded file includes the matched sample with propensity scores, match IDs, and outcomes.
        </p>
      </div>
    </section>

    <!-- Propensity Model Details (collapsed) -->
    <section class="propensity-model-section">
      <h2>PROPENSITY MODEL DETAILS</h2>
      <div class="card">
        <details class="propensity-model-details">
          <summary>View Propensity Score Model Coefficients</summary>
          <p class="muted">The propensity score model predicts treatment assignment from covariates using logistic regression.</p>
          <div id="ps-model-equation" class="regression-equation-text" style="margin: 1rem 0;">
            Run matching to see the propensity model.
          </div>
          <table class="summary-table">
            <thead>
              <tr>
                <th>Covariate</th>
                <th>Coefficient</th>
                <th>Std. Error</th>
                <th>z</th>
                <th>p-value</th>
                <th>Odds Ratio</th>
              </tr>
            </thead>
            <tbody id="ps-coef-table-body">
              <tr><td colspan="6">Run matching to see coefficients.</td></tr>
            </tbody>
          </table>
          <div class="ps-model-metrics" style="margin-top: 1rem;">
            <span><strong>Pseudo R¬≤:</strong> <span id="ps-pseudo-r2">--</span></span>
            <span style="margin-left: 2rem;"><strong>Model œá¬≤:</strong> <span id="ps-chi2">--</span></span>
            <span style="margin-left: 2rem;"><strong>p-value:</strong> <span id="ps-model-pvalue">--</span></span>
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <div class="footer-content">
      <div class="footer-nav">
        <a href="../../../index.html" class="back-link">‚Üê Back to Tool Selection</a>
      </div>
      <div class="footer-meta">
        <span class="meta-item">Created: 2025-01-15</span>
        <span class="separator">‚Ä¢</span>
        <span class="meta-item">Last Updated: 2025-05-28</span>
      </div>
      <div class="footer-citation">
        <div class="citation-label">Cite this tool:</div>
        <div class="citation-text">Baker, A. (2025). Propensity Score Matching Tool. <em>Dr. Baker's Marketing Tools</em>. Retrieved from <a href="https://drbakermarketing.com/apps/advanced/ps_matching/main_ps_matching.html" target="_blank">https://drbakermarketing.com/apps/advanced/ps_matching/main_ps_matching.html</a></div>
      </div>
      <div class="footer-copyright">
        &copy; 2025 Andrew Baker. All rights reserved.
      </div>
    </div>
  </footer>

  <script src="../../../shared/js/csv_utils.js"></script>
  <script src="../../../shared/js/stats_utils.js"></script>
  <script src="../../../shared/js/ui_utils.js"></script>
  <script src="../../../shared/js/auth_tracking.js"></script>
  <script src="../../../shared/js/auth_bar.js"></script>
  <script src="../../../shared/js/quiz_utils.js"></script>
  <script src="main_ps_matching.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      initQuizButton('ps_matching');
    });
  </script>
  <div id="psm-loading-overlay" class="loading-overlay" aria-hidden="true">
    <div class="loading-content">
      <p><strong>Running propensity score matching‚Ä¶</strong></p>
      <p class="muted">Fitting model and matching units. Please wait.</p>
    </div>
  </div>
</body>

</html>
