<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Marketing Prediction Lab - Dr. Baker Marketing Analytics</title>
    <link rel="stylesheet" href="../../../shared/css/main.css">
    <script src="../../../shared/js/tracking.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-290ZJ9RE04"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-290ZJ9RE04');
    </script>
    <style>
        .playground-container {
            max-width: 1200px; /* Standard app width */
            margin: 0 auto;
            padding: clamp(1rem, 4vw, 3rem); /* Standard app padding */
        }

        .playground-header {
            text-align: center;
            margin-bottom: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .playground-header h1 {
            color: #1e40af; /* Standard header color */
            margin-bottom: 10px;
        }

        .playground-header p {
            color: var(--app-muted);
            font-size: 1.1em;
        }

        .playground-grid {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .step-card {
            background: var(--app-card-bg);
            border-radius: 12px; /* Standard card radius */
            padding: clamp(1rem, 3vw, 2rem); /* Standard card padding */
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08); /* Standard card shadow */
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .step-card:hover {
            box-shadow: 0 15px 35px rgba(15, 23, 42, 0.12);
        }

        /* Step 1 & 2 Color */
        #step1, #step2 {
            border-left-color: var(--app-accent);
        }

        /* Step 3 Color */
        #step3 {
            border-left-color: var(--app-warning);
        }

        /* Step 4 Color */
        #step4 {
            border-left-color: var(--app-success);
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--app-border);
            padding-bottom: 15px;
        }

        .step-header h2 {
            margin: 0;
            color: #1e40af; /* Standard header color */
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Tutorial / Professor Mode Styles */
        #tutorial-sidebar {
            position: fixed;
            top: 0;
            right: -400px; /* Hidden by default */
            width: 350px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 2000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
            border-left: 5px solid var(--app-accent);
        }

        #tutorial-sidebar.active {
            right: 0;
        }

        .sidebar-header {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid var(--app-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h2 {
            margin: 0;
            font-size: 1.2em;
            color: #1e40af;
        }

        .close-tutorial {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--app-muted);
        }

        #tutorial-content {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
        }

        .tutorial-step-badge {
            display: inline-block;
            background: var(--app-accent);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tutorial-body {
            line-height: 1.6;
            color: var(--app-text);
            margin-bottom: 20px;
        }

        .tutorial-body p {
            margin-bottom: 15px;
        }

        .tutorial-body .task {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid var(--app-success);
            font-weight: 500;
        }

        .tutorial-progress {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        #tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            display: none;
            pointer-events: none; /* Allow clicking through to highlighted element? No, we want to block outside clicks */
        }
        
        /* When overlay is active, allow pointer events on it to block clicks elsewhere */
        #tutorial-overlay {
            pointer-events: auto;
        }

        /* Highlighted element sits above overlay */
        .tutorial-highlight {
            position: relative;
            z-index: 1001 !important;
            background: white; /* Ensure background is opaque */
            box-shadow: 0 0 0 5px var(--app-accent), 0 0 20px rgba(0,0,0,0.5); /* Blue glow ring */
            pointer-events: auto;
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0px rgba(42, 125, 225, 0.7), 0 0 20px rgba(0,0,0,0.5); }
            70% { box-shadow: 0 0 0 10px rgba(42, 125, 225, 0), 0 0 20px rgba(0,0,0,0.5); }
            100% { box-shadow: 0 0 0 0px rgba(42, 125, 225, 0), 0 0 20px rgba(0,0,0,0.5); }
        }

        .dataset-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .model-design-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .model-design-grid {
                grid-template-columns: 1fr;
            }
        }

            text-transform: uppercase;
            color: var(--app-muted);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            font-size: 0.9em;
            margin-bottom: 5px;
            color: var(--app-text);
        }

        .control-group select,
        .control-group input[type="range"] {
            width: 100%;
        }

        .control-group .value-display {
            font-size: 0.85em;
            color: var(--app-accent);
            font-weight: 600;
        }

        .dataset-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .dataset-card {
            border: 2px solid var(--app-border);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .dataset-card:hover {
            border-color: var(--app-accent);
            background: #f8f9fa;
        }

        .dataset-card.active {
            border-color: var(--app-accent);
            background: #e3f2fd;
        }

        .dataset-preview {
            width: 60px;
            height: 60px;
            margin: 0 auto 5px;
        }

        .dataset-card h4 {
            font-size: 0.85em;
            margin: 0 0 3px 0;
            color: var(--app-text);
        }

        .dataset-card .dataset-desc {
            font-size: 0.75em;
            color: var(--app-muted);
            margin: 0;
        }

        .scenario-details {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 12px;
            margin-top: 15px;
        }

        .scenario-details h4 {
            color: var(--app-text);
        }

        .section-divider {
            height: 2px;
            background: linear-gradient(to right, transparent, var(--app-accent), transparent);
            margin: 25px 0;
        }

        .model-section {
            background: #f0f7ff;
            border-left: 3px solid var(--app-accent);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 6px;
        }

        .help-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            line-height: 16px;
            text-align: center;
            background: var(--app-accent);
            color: white;
            border-radius: 50%;
            font-size: 0.7em;
            cursor: help;
            margin-left: 3px;
        }

        .help-icon:hover {
            background: var(--app-accent-dark);
        }

        .feature-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .feature-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85em;
        }

        .visualization-panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .network-viz {
            margin-bottom: 20px;
        }

        .viz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .viz-header h2 {
            margin: 0;
            font-size: 1.2em;
            color: #1e40af;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px; /* Standard button radius */
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--app-accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--app-accent-dark);
        }

        .btn-secondary {
            background: var(--app-muted);
            color: white;
        }

        .btn-secondary:hover {
            background: var(--app-text);
        }

        .btn-danger {
            background: var(--app-danger);
            color: white;
        }

        .btn-danger:hover {
            background: #b91c1c; /* Darker red */
        }

        .training-section, .validation-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            margin: 0;
            color: #1e40af;
            font-size: 1.3em;
        }

        .training-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .network-viz-box, .progress-viz-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
        }

        .network-viz-box h3, .progress-viz-box h3, .boundary-viz-box h3, .validation-metrics-box h3 {
            margin: 0 0 15px 0;
            font-size: 1em;
            color: var(--app-text);
        }

        #networkCanvas {
            width: 100%;
            height: 350px;
            border: 1px solid var(--app-border);
            border-radius: 4px;
            background: white;
            display: block;
        }

        #lossChart {
            width: 100%;
            height: 250px;
            border: 1px solid var(--app-border);
            border-radius: 4px;
            background: white;
            display: block;
        }

        .metrics-row {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .metric-mini {
            flex: 1;
            background: white;
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }

        .metric-mini .metric-label {
            display: block;
            font-size: 0.75em;
            color: var(--app-muted);
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .metric-mini .metric-value {
            display: block;
            font-size: 1.4em;
            font-weight: 600;
            color: var(--app-text);
        }

        .validation-grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 20px;
        }

        .boundary-viz-box, .validation-metrics-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
        }

        #boundaryCanvas {
            width: 100%;
            height: 400px;
            border: 1px solid var(--app-border);
            border-radius: 4px;
            background: white;
            display: block;
        }

        .metric-card-large {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .metric-card-large h4 {
            margin: 0 0 10px 0;
            font-size: 0.9em;
            color: var(--app-muted);
            text-transform: uppercase;
        }

        .metric-card-large .value-large {
            font-size: 3em;
            font-weight: 700;
            color: var(--app-success);
        }

        .validation-explanation {
            background: white;
            border-radius: 8px;
            padding: 15px;
        }

        .validation-explanation h4 {
            margin: 0 0 10px 0;
            font-size: 0.95em;
            color: var(--app-text);
        }

        .validation-explanation ul {
            margin: 0;
            padding-left: 20px;
        }

        .metric-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .metric-card h4 {
            margin: 0 0 5px 0;
            font-size: 0.85em;
            color: var(--app-muted);
            text-transform: uppercase;
        }

        .metric-card .value {
            font-size: 1.8em;
            font-weight: 600;
            color: var(--app-text);
        }

        .metric-card .subvalue {
            font-size: 0.9em;
            color: var(--app-muted);
        }

        .chart-container {
            margin-top: 20px;
        }

        #lossChart {
            width: 100%;
            height: 200px;
            border: 1px solid var(--app-border);
            border-radius: 4px;
            background: white;
            display: block;
        }

        .info-box {
            background: #eff6ff; /* Light blue */
            border-left: 4px solid var(--app-accent);
            padding: 15px;
            margin: 20px auto;
            border-radius: 4px;
            max-width: 1000px;
        }

        .info-box h3 {
            margin: 0 0 10px 0;
            color: #1e40af;
            font-size: 1em;
        }

        .info-box p {
            margin: 0;
            color: var(--app-text);
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* Professor Mode banner styles are in shared/css/main.css */

        @media (max-width: 768px) {
            .playground-grid {
                grid-template-columns: 1fr;
            }

            .dataset-selector {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Bar -->
    <div class="auth-bar">
        <div class="auth-bar__container">
            <div></div>
            <div id="auth-bar-content" class="auth-bar__links">
                <!-- Populated by auth_bar.js -->
            </div>
        </div>
    </div>

    <div class="playground-container">
        <div class="playground-header">
            <h1>üß† AI Marketing Prediction Lab</h1>
            <p>Understand and visualize how neural üß† networks (an "A.I." tool) can be designed to predict consumer behavior</p>
        </div>

    <!-- Professor Mode Banner -->
    <div class="professor-mode-banner">
        <div class="professor-mode-content">
            <div class="professor-mode-info">
                <h3>üë®‚Äçüè´ Professor Mode: Guided Learning Experience</h3>
                <p>New to neural networks? Enable Professor Mode for step-by-step guidance through building and training your first model!</p>
            </div>
            <label class="professor-mode-toggle">
                <input type="checkbox" id="professorMode" checked>
                <span>Enable Professor Mode</span>
            </label>
        </div>
    </div>

        <!-- Info Box -->
        <div class="info-box">
            <h3>What is this tool?</h3>
            <p>
                Neural networks learn patterns from data by adjusting internal weights through training. 
                This playground lets you experiment with different network architectures and see how they learn 
                to classify marketing scenarios like customer segments, churn prediction, and A/B test outcomes.
            </p>
        </div>

    <div class="playground-grid">
        
        <!-- Step 1: Business Problem -->
        <div class="step-card" id="step1">
            <div class="step-header">
                <h2>üìä Step 1: Choose Your Business Problem</h2>
            </div>
            
            <p style="color: var(--app-muted); margin-bottom: 20px;">
                Select a real marketing scenario. Each has different patterns the network must learn.
            </p>

            <div class="dataset-selector">
                <div class="dataset-card active" data-dataset="churn">
                    <canvas class="dataset-preview" id="preview-churn"></canvas>
                    <h4>Customer Churn</h4>
                    <p class="dataset-desc">Will customers stay or leave?</p>
                </div>
                <div class="dataset-card" data-dataset="segment">
                    <canvas class="dataset-preview" id="preview-segment"></canvas>
                    <h4>Market Segments</h4>
                    <p class="dataset-desc">Identify customer groups</p>
                </div>
                <div class="dataset-card" data-dataset="abtest">
                    <canvas class="dataset-preview" id="preview-abtest"></canvas>
                    <h4>A/B Test</h4>
                    <p class="dataset-desc">Predict which version converts</p>
                </div>
                <div class="dataset-card" data-dataset="affinity">
                    <canvas class="dataset-preview" id="preview-affinity"></canvas>
                    <h4>Product Affinity</h4>
                    <p class="dataset-desc">Who will buy together?</p>
                </div>
                <!-- Upload Option -->
                <div class="dataset-card" id="uploadCard">
                    <div style="height: 60px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: var(--app-accent);">
                        üìÇ
                    </div>
                    <h4>Upload Data</h4>
                    <p class="dataset-desc">CSV: 2 Features + 1 Outcome</p>
                    <a href="#" id="downloadTemplateBtn" style="font-size: 0.8em; color: var(--app-accent); margin-top: 5px; display: inline-block; text-decoration: underline;">Download Template CSV</a>
                    <input type="file" id="csvUpload" accept=".csv,.tsv,.txt" style="display: none;">
                </div>
            </div>

            <div style="display: block;">
                <!-- Scenario Details -->
                <div class="scenario-details" id="scenarioDetails" style="margin-top: 0;">
                    <h4 style="font-size: 0.9em; margin-bottom: 8px;">Current Scenario:</h4>
                    <p id="scenarioDescription" style="font-size: 0.85em; line-height: 1.5; color: var(--app-text);">
                        Predict customer churn based on pricing and service quality. 
                        <strong style="color: var(--app-accent);">Blue</strong> = likely to stay, 
                        <strong style="color: var(--app-danger);">Red</strong> = likely to churn.
                    </p>
                    <button class="btn btn-secondary" id="viewDataBtn" style="width: 100%; margin-top: 10px; font-size: 0.85em;">
                        üëÅÔ∏è View Sample Data
                    </button>
                </div>

                <!-- Data Settings (Hidden) -->
                <div style="display: none;">
                    <h4 style="font-size: 0.9em; margin-bottom: 10px; color: var(--app-text);">Data Settings</h4>
                    <div class="control-group">
                        <label>
                            Noise Level 
                            <span class="help-icon" title="Add randomness to make the pattern harder to learn">‚ìò</span>
                            : <span class="value-display" id="noiseValue">0%</span>
                        </label>
                        <input type="range" id="noise" min="0" max="50" value="0" step="1">
                    </div>
                    <div class="control-group">
                        <label>
                            Training Data 
                            <span class="help-icon" title="% of data used to teach the network">‚ìò</span>
                            : <span class="value-display" id="trainSplitValue">70%</span>
                        </label>
                        <input type="range" id="trainSplit" min="50" max="90" value="70" step="5">
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Model Design -->
        <div class="step-card" id="step2">
            <div class="step-header">
                <h2>üß† Step 2: Design Your Model</h2>
            </div>
            
            <p style="color: var(--app-muted); margin-bottom: 20px;">
                Configure what information the network uses and how it processes it.
            </p>

            <div class="model-design-grid">
                <!-- Input Features -->
                <div>
                    <h4 style="font-size: 0.9em; margin-bottom: 15px; color: var(--app-text);">
                        Input Features 
                        <span class="help-icon" title="Variables the network uses to make predictions">‚ìò</span>
                    </h4>
                    <div class="feature-selector">
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="price" checked>
                            <span id="label-x">Variable X</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="quality" checked>
                            <span id="label-y">Variable Y</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="priceSquared">
                            <span id="label-x2">X¬≤ (Squared)</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="qualitySquared">
                            <span id="label-y2">Y¬≤ (Squared)</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="interaction">
                            <span id="label-xy">X √ó Y (Interaction)</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="logX">
                            <span id="label-logx">ln(X)</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="logY">
                            <span id="label-logy">ln(Y)</span>
                        </label>
                    </div>
                </div>

                <!-- Architecture & Advanced -->
                <div>
                    <h4 style="font-size: 0.9em; margin-bottom: 15px; color: var(--app-text);">
                        Network Architecture
                        <span class="help-icon" title="The 'brain' structure">‚ìò</span>
                    </h4>
                    <div class="control-group">
                        <label>
                            Hidden Layers: <span class="value-display" id="layersValue">1</span>
                        </label>
                        <input type="range" id="hiddenLayers" min="0" max="4" value="1" step="1">
                    </div>
                    <div class="control-group">
                        <label>
                            Neurons per Layer: <span class="value-display" id="neuronsValue">4</span>
                        </label>
                        <input type="range" id="neuronsPerLayer" min="2" max="8" value="4" step="1">
                    </div>

                    <div class="advanced-controls" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--app-border);">
                        <h4 style="font-size: 0.9em; margin-bottom: 15px; color: var(--app-text);">Advanced Settings</h4>
                        <div class="control-group">
                            <label>Learning Speed: <span class="value-display" id="learningRateValue">0.03</span></label>
                            <input type="range" id="learningRate" min="0.001" max="0.1" value="0.03" step="0.001">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div class="control-group">
                                <label>Activation</label>
                                <select id="activation">
                                    <option value="relu">ReLU</option>
                                    <option value="tanh" selected>Tanh</option>
                                    <option value="sigmoid">Sigmoid</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label>Regularization</label>
                                <select id="regularization">
                                    <option value="none" selected>None</option>
                                    <option value="L1">L1</option>
                                    <option value="L2">L2</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Training -->
        <div class="step-card" id="step3">
            <div class="step-header">
                <h2>üéØ Step 3: Model Training</h2>
                <div class="control-buttons">
                    <button class="btn btn-primary" id="playPauseBtn">
                        <span id="playPauseIcon">‚ñ∂</span> Start Training
                    </button>
                    <button class="btn btn-secondary" id="stepBtn">Step</button>
                    <button class="btn btn-danger" id="resetBtn">Reset</button>
                    <button class="btn btn-secondary" id="viewWeightsBtn" title="View internal model weights">Weights</button>
                </div>
            </div>

            <div class="training-grid">
                <div class="network-viz-box">
                    <h3>Network Architecture</h3>
                    <canvas id="networkCanvas"></canvas>
                </div>
                <div class="progress-viz-box">
                    <h3>Training Progress</h3>
                    <canvas id="lossChart"></canvas>
                    <div class="metrics-row">
                        <div class="metric-mini">
                            <span class="metric-label">Iterations</span>
                            <span class="metric-value" id="iterations">0</span>
                        </div>
                        <div class="metric-mini">
                            <span class="metric-label">Train Loss</span>
                            <span class="metric-value" id="trainLoss">0.000</span>
                        </div>
                        <div class="metric-mini">
                            <span class="metric-label">Train Acc</span>
                            <span class="metric-value" id="trainAccuracy">0.0%</span>
                        </div>
                        <div class="metric-mini">
                            <span class="metric-label">Test Loss</span>
                            <span class="metric-value" id="testLoss">0.000</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4: Validation -->
        <div class="step-card" id="step4">
            <div class="step-header">
                <h2>‚úÖ Step 4: Model Validation</h2>
            </div>

            <div class="validation-grid">
                <div class="boundary-viz-box">
                    <h3>Decision Boundary</h3>
                    <canvas id="boundaryCanvas"></canvas>
                    <p style="font-size: 0.85em; color: var(--app-muted); margin-top: 10px; text-align: center; line-height: 1.4;">
                        Background = predictions | Dots = actual data<br>
                        <span style="font-size: 0.9em;">
                            <strong>Color Intensity = Confidence</strong><br>
                            Deep Color = Certain | Grey = Uncertain
                        </span>
                    </p>
                </div>
                <div class="validation-metrics-box">
                    <h3>Performance on Unseen Data</h3>
                    <div class="metric-card-large">
                        <h4>Test Accuracy</h4>
                        <div class="value-large" id="accuracy">--</div>
                        <p style="font-size: 0.85em; color: var(--app-muted); margin-top: 8px;">
                            Percentage of test data points correctly classified
                        </p>
                    </div>
                    <div class="validation-explanation">
                        <h4>ü§î Understanding Validation</h4>
                        <ul style="font-size: 0.9em; line-height: 1.8; color: var(--app-text);">
                            <li><strong>Test data</strong> were NOT used during training</li>
                            <li><strong>Good fit:</strong> Similar performance on train/test</li>
                            <li><strong>Overfitting:</strong> Great train, poor test</li>
                        </ul>
                        <div id="validationInsight" style="margin-top: 15px; padding: 12px; background: var(--app-bg-light); border-radius: 6px; font-size: 0.9em;">
                            <strong>üí° Current Model Status:</strong>
                            <p id="validationStatus" style="margin: 5px 0 0 0;">Train your model to see validation results...</p>
                        </div>
                        <button class="btn btn-secondary" id="viewPredictionsBtn" style="width: 100%; margin-top: 15px; font-size: 0.9em;">
                            üìã View Prediction Details
                        </button>
                        <button class="btn btn-secondary" id="downloadPredictionsBtn" style="width: 100%; margin-top: 10px; font-size: 0.9em;">
                            üì• Download Full Predictions (CSV)
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Data Preview Modal -->
    <div id="dataModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10000; padding: 20px; overflow: auto;">
        <div style="max-width: 800px; margin: 50px auto; background: white; border-radius: 12px; padding: 30px; position: relative;">
            <button id="closeModal" style="position: absolute; top: 15px; right: 15px; background: var(--app-danger); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px;">√ó</button>
            <h2 style="margin-top: 0;">üìä Sample Data Preview</h2>
            <div id="dataPreviewContent"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../../shared/js/csv_utils.js"></script>
    <script src="../../../shared/js/auth_tracking.js"></script>
    <script src="../../../shared/js/auth_bar.js"></script>
    <script src="nn.js"></script>
    <script src="playground.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
