<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Network Playground - Dr. Baker Marketing Analytics</title>
    <link rel="stylesheet" href="../../../shared/css/main.css">
    <style>
        .playground-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .playground-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .playground-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .playground-header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .playground-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .controls-panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .control-section {
            margin-bottom: 25px;
        }

        .control-section h3 {
            font-size: 0.9em;
            text-transform: uppercase;
            color: #7f8c8d;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            font-size: 0.9em;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .control-group select,
        .control-group input[type="range"] {
            width: 100%;
        }

        .control-group .value-display {
            font-size: 0.85em;
            color: #3498db;
            font-weight: 600;
        }

        .dataset-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .dataset-card {
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .dataset-card:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }

        .dataset-card.active {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .dataset-preview {
            width: 60px;
            height: 60px;
            margin: 0 auto 5px;
        }

        .dataset-card h4 {
            font-size: 0.85em;
            margin: 0;
            color: #2c3e50;
        }

        .feature-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .feature-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85em;
        }

        .visualization-panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .network-viz {
            margin-bottom: 20px;
        }

        .viz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .viz-header h2 {
            margin: 0;
            font-size: 1.2em;
            color: #2c3e50;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        #networkCanvas {
            width: 100%;
            height: 400px;
            border: 1px solid #ecf0f1;
            border-radius: 4px;
            background: #f8f9fa;
            display: block;
        }

        .metrics-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .metric-card h4 {
            margin: 0 0 5px 0;
            font-size: 0.85em;
            color: #7f8c8d;
            text-transform: uppercase;
        }

        .metric-card .value {
            font-size: 1.8em;
            font-weight: 600;
            color: #2c3e50;
        }

        .metric-card .subvalue {
            font-size: 0.9em;
            color: #95a5a6;
        }

        .chart-container {
            margin-top: 20px;
        }

        #lossChart {
            width: 100%;
            height: 200px;
            border: 1px solid #ecf0f1;
            border-radius: 4px;
            background: white;
            display: block;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box h3 {
            margin: 0 0 10px 0;
            color: #1976d2;
            font-size: 1em;
        }

        .info-box p {
            margin: 0;
            color: #424242;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .guided-mode-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .guided-mode-banner h3 {
            margin: 0;
            font-size: 1em;
        }

        .guided-mode-banner label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .playground-grid {
                grid-template-columns: 1fr;
            }

            .dataset-selector {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Bar -->
    <div class="auth-bar">
        <div class="auth-bar__container">
            <div></div>
            <div id="auth-bar-content" class="auth-bar__links">
                <!-- Populated by auth_bar.js -->
            </div>
        </div>
    </div>

    <div class="playground-container">
        <div class="playground-header">
            <h1>ðŸ§  Neural Network Playground</h1>
            <p>Visualize and understand how neural networks learn marketing patterns</p>
        </div>

        <!-- Guided Mode Banner -->
        <div class="guided-mode-banner">
            <h3>ðŸ‘‹ New to neural networks? Guided mode simplifies the controls!</h3>
            <label>
                <input type="checkbox" id="guidedMode" checked>
                <span>Guided Mode</span>
            </label>
        </div>

        <!-- Info Box -->
        <div class="info-box">
            <h3>What is this tool?</h3>
            <p>
                Neural networks learn patterns from data by adjusting internal weights through training. 
                This playground lets you experiment with different network architectures and see how they learn 
                to classify marketing scenarios like customer segments, churn prediction, and A/B test outcomes.
            </p>
        </div>

        <div class="playground-grid">
            <!-- Controls Panel -->
            <div class="controls-panel">
                <!-- Dataset Selection -->
                <div class="control-section">
                    <h3>Marketing Scenario</h3>
                    <div class="dataset-selector">
                        <div class="dataset-card active" data-dataset="churn">
                            <canvas class="dataset-preview" id="preview-churn"></canvas>
                            <h4>Customer Churn</h4>
                        </div>
                        <div class="dataset-card" data-dataset="segment">
                            <canvas class="dataset-preview" id="preview-segment"></canvas>
                            <h4>Market Segment</h4>
                        </div>
                        <div class="dataset-card" data-dataset="abtest">
                            <canvas class="dataset-preview" id="preview-abtest"></canvas>
                            <h4>A/B Test</h4>
                        </div>
                        <div class="dataset-card" data-dataset="affinity">
                            <canvas class="dataset-preview" id="preview-affinity"></canvas>
                            <h4>Product Affinity</h4>
                        </div>
                    </div>
                </div>

                <!-- Input Features -->
                <div class="control-section">
                    <h3>Input Features</h3>
                    <div class="feature-selector">
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="price" checked>
                            <span>Price</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="quality" checked>
                            <span>Quality</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="priceSquared">
                            <span>PriceÂ²</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="qualitySquared">
                            <span>QualityÂ²</span>
                        </label>
                        <label class="feature-checkbox">
                            <input type="checkbox" name="feature" value="interaction">
                            <span>Price Ã— Quality</span>
                        </label>
                    </div>
                </div>

                <!-- Network Architecture -->
                <div class="control-section">
                    <h3>Network Structure</h3>
                    <div class="control-group">
                        <label>Hidden Layers: <span class="value-display" id="layersValue">1</span></label>
                        <input type="range" id="hiddenLayers" min="0" max="4" value="1" step="1">
                    </div>
                    <div class="control-group">
                        <label>Neurons per Layer: <span class="value-display" id="neuronsValue">4</span></label>
                        <input type="range" id="neuronsPerLayer" min="2" max="8" value="4" step="1">
                    </div>
                </div>

                <!-- Learning Settings -->
                <div class="control-section advanced-controls">
                    <h3>Learning Settings</h3>
                    <div class="control-group">
                        <label>Learning Speed: <span class="value-display" id="learningRateValue">0.03</span></label>
                        <input type="range" id="learningRate" min="0.001" max="0.1" value="0.03" step="0.001">
                    </div>
                    <div class="control-group">
                        <label>Transformation Type</label>
                        <select id="activation">
                            <option value="relu">ReLU (Recommended)</option>
                            <option value="tanh" selected>Tanh</option>
                            <option value="sigmoid">Sigmoid</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Complexity Penalty</label>
                        <select id="regularization">
                            <option value="none" selected>None (Simpler)</option>
                            <option value="L1">L1</option>
                            <option value="L2">L2</option>
                        </select>
                    </div>
                </div>

                <!-- Data Settings -->
                <div class="control-section advanced-controls">
                    <h3>Data Settings</h3>
                    <div class="control-group">
                        <label>Noise Level: <span class="value-display" id="noiseValue">0%</span></label>
                        <input type="range" id="noise" min="0" max="50" value="0" step="1">
                    </div>
                    <div class="control-group">
                        <label>Training Data: <span class="value-display" id="trainSplitValue">70%</span></label>
                        <input type="range" id="trainSplit" min="50" max="90" value="70" step="5">
                    </div>
                </div>
            </div>

            <!-- Visualization Panel -->
            <div class="visualization-panel">
                <div class="network-viz">
                    <div class="viz-header">
                        <h2>Network Visualization</h2>
                        <div class="control-buttons">
                            <button class="btn btn-primary" id="playPauseBtn">
                                <span id="playPauseIcon">â–¶</span> Start Training
                            </button>
                            <button class="btn btn-secondary" id="stepBtn">Step</button>
                            <button class="btn btn-danger" id="resetBtn">Reset</button>
                        </div>
                    </div>

                    <!-- Network Canvas -->
                    <canvas id="networkCanvas"></canvas>

                    <!-- Metrics -->
                    <div class="metrics-panel">
                        <div class="metric-card">
                            <h4>Training Loss</h4>
                            <div class="value" id="trainLoss">0.000</div>
                        </div>
                        <div class="metric-card">
                            <h4>Test Loss</h4>
                            <div class="value" id="testLoss">0.000</div>
                        </div>
                        <div class="metric-card">
                            <h4>Iterations</h4>
                            <div class="value" id="iterations">0</div>
                        </div>
                        <div class="metric-card">
                            <h4>Accuracy</h4>
                            <div class="value" id="accuracy">--</div>
                            <div class="subvalue">Test Data</div>
                        </div>
                    </div>

                    <!-- Loss Chart -->
                    <div class="chart-container">
                        <h3 style="font-size: 1em; margin-bottom: 10px;">Training Progress</h3>
                        <canvas id="lossChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../../shared/js/auth_tracking.js"></script>
    <script src="../../../shared/js/auth_bar.js"></script>
    <script src="nn.js"></script>
    <script src="playground.js"></script>
</body>
</html>
