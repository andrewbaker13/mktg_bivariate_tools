<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bivariate Linear Regression Tool</title>
  <link rel="stylesheet" href="../../../shared/css/main.css">
  <link rel="stylesheet" href="../../../shared/css/auth_bar.css">
  <link rel="stylesheet" href="main_bivariate_regression.css">
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-290ZJ9RE04"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-290ZJ9RE04');
    </script>
</head><body>
  <div class="auth-bar">
    <div class="auth-bar__container">
      <div></div>
      <div id="auth-bar-content" class="auth-bar__links">
        <a href="../../login.html">Login</a>
        <a href="../../register.html">Create Account</a>
      </div>
    </div>
  </div>
  <header class="intro hero-header">
    <div class="hero-header__top">
      <h1>Bivariate Linear Regression Tool</h1>
      <div class="hero-context">
        <span class="badge">New</span>
      </div>
    </div>
    <p class="hero-header__lede">
      Fit and interpret simple linear regression models for marketing data, using either a single continuous predictor or a single binary (two-level) categorical predictor.
    </p>
  </header>

  <main class="app-main">
    <section class="test-overview">
      <h2>TEST OVERVIEW &amp; EQUATIONS</h2>
      <div class="card">
        <p>
          Bivariate linear regression estimates how an outcome \(Y\) changes, on average, with one predictor \(X\).
          In marketing contexts, \(Y\) might be revenue per user, time on site, or order value, while \(X\) could be a continuous metric (spend, impressions, visits)
          or a binary condition (control vs. treatment).
        </p>
        <p class="equation">
          <strong>Model:</strong>
          $$ Y_i = \beta_0 + \beta_1 X_i + \varepsilon_i $$
        </p>
        <p class="equation">
          <strong>Test statistic for slope:</strong>
          $$ t = \frac{\hat{\beta}_1}{\mathrm{SE}(\hat{\beta}_1)} \quad\text{with}\quad \nu = n - 2 $$
        </p>
        <p class="equation">
          <strong>Confidence interval for slope:</strong>
          $$ \hat{\beta}_1 \pm t_{\alpha/2,\nu}\,\mathrm{SE}(\hat{\beta}_1) $$
        </p>
        <details class="additional-notes">
          <summary>Continuous vs. Categorical Predictors</summary>
          <p>
            When \(X\) is continuous, \(\hat{\beta}_1\) represents the expected change in \(Y\) for a one-unit change in \(X\).
            When \(X\) is a binary group indicator (e.g., 0 = control, 1 = treatment), \(\hat{\beta}_1\) is the mean difference between groups,
            and \(\hat{\beta}_0\) is the mean for the baseline group.
          </p>
        </details>
      </div>
    </section>

    <section class="scenario-section">
      <h2>MARKETING SCENARIOS</h2>
      <div class="card">
        <div class="scenario-controls">
          <label for="scenario-select">Load a marketing scenario:</label>
          <div class="scenario-controls__input">
            <select id="scenario-select">
              <option value="">Manual inputs (no preset)</option>
            </select>
            <button id="scenario-download" class="secondary hidden" type="button" disabled>
              Download scenario dataset
            </button>
          </div>
        </div>
        <div id="scenario-description">
          <p>
            Use presets to explore realistic use cases, such as <em>ad spend vs. revenue</em> or <em>control vs. treatment on order value</em>.
            Each scenario can expose either a summary CSV of aggregated statistics or a raw data file that you can download, edit in Excel, and re-upload.
          </p>
        </div>
      </div>
    </section>

    <section class="inputs-panel">
      <h2>INPUTS &amp; SETTINGS</h2>
      <div class="card data-entry-card">
        <div class="input-header">
          <h3>Select Data Entry / Upload Mode</h3>
        </div>
        <div class="mode-toggle" role="tablist" aria-label="Data entry mode">
          <button type="button" class="mode-button active" data-mode="raw-upload">Upload raw data</button>
          <button type="button" class="mode-button" data-mode="manual">Manual entry</button>
        </div>
        <div class="mode-panels">
          <div class="mode-panel" data-mode="manual" id="manual-panel">
            <article class="manual-card">
              <h3>Manual raw data entry</h3>
              <p>
                Add up to 50 paired observations. The predictor can be numeric (continuous) or categorical labels.
              </p>
              <div class="manual-table" data-structure="paired">
                <div class="data-table" role="region" aria-label="Manual paired input table">
                  <table>
                    <thead>
                      <tr>
                        <th scope="col">Row</th>
                        <th scope="col">Predictor (X)</th>
                        <th scope="col">Outcome (Y)</th>
                      </tr>
                    </thead>
                    <tbody id="regression-table-body"></tbody>
                  </table>
                </div>
              </div>
              <div class="manual-controls">
                <label for="manual-row-count">Rows to show (max 50):</label>
                <input type="number" id="manual-row-count" min="4" max="50" value="4">
              </div>
              <div class="manual-actions">
                <button type="button" id="manual-commit" class="primary">Manual data entry complete</button>
              </div>
              <div class="data-actions">
                <button type="button" id="swap-xy-manual" class="secondary hidden">Swap Predictor (X) & Outcome (Y)</button>
              </div>
              <div class="column-selectors">
                <div class="input-group">
                  <label for="x-column-select">Predictor (X)</label>
                  <select id="x-column-select"></select>
                </div>
                <div class="input-group">
                  <label for="y-column-select">Outcome (Y)</label>
                  <select id="y-column-select"></select>
                </div>
              </div>
              <fieldset class="input-group predictor-type-group">
                <legend>Predictor type</legend>
                <label class="radio-label">
                  <input type="radio" name="predictor-type" value="continuous" checked>
                  <span>Continuous (numeric)</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="predictor-type" value="categorical">
                  <span>Categorical (group labels)</span>
                </label>
              </fieldset>
            <p class="predictor-type-warning" id="predictor-type-warning"></p>
          </article>
        </div>

          <div class="mode-panel" data-mode="raw-upload" id="raw-panel">
            <p class="panel-intro">
              Upload raw case-level data. The file should have exactly two columns: a predictor and an outcome.
              Text/string predictors are treated as categorical; numeric predictors can be interpreted as continuous or categorical based on the option you choose below.
            </p>
            <div class="dropzone" id="raw-dropzone" role="button" tabindex="0">
          <p class="dropzone-title">Drag &amp; Drop raw data file (.csv, .tsv, .txt)</p>
          <p class="dropzone-note">Two columns with headers, such as <code>Predictor,Outcome</code>. Numeric predictors can be treated as continuous or categorical.</p>
              <button type="button" id="raw-browse" class="secondary">Browse files</button>
            </div>
            <input type="file" id="raw-input" accept=".csv,.tsv,.txt" hidden>
            <div class="template-buttons">
              <button type="button" id="raw-template-download">Download raw template</button>
            </div>
            <p class="upload-status" id="raw-upload-status">No raw file uploaded.</p>
            <div class="data-actions">
              <button type="button" id="swap-xy-upload" class="secondary hidden">Swap Predictor (X) &amp; Outcome (Y)</button>
            </div>
            <div class="input-group predictor-type-group">
              <label for="upload-predictor-type">Predictor type for numeric uploads</label>
              <select id="upload-predictor-type">
                <option value="auto" selected>Auto &mdash; infer from data (default)</option>
                <option value="continuous">Continuous (numeric, slope per 1-unit change)</option>
                <option value="categorical">Categorical (groups, mean difference vs reference)</option>
              </select>
            </div>
            <p class="predictor-type-warning" id="upload-predictor-type-warning"></p>
            <div id="reference-selector" class="reference-selector" style="display:none;">
              <label for="reference-level-select">Reference group for categorical predictor</label>
              <select id="reference-level-select"></select>
              <p class="muted">
                The reference group serves as the baseline; estimates for other levels are interpreted as differences
                relative to this group throughout the coefficients, plots, and narratives.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="card confidence-card">
        <h3>Confidence Level &amp; Reporting</h3>
        <p>Set the significance level for hypothesis tests on the slope and the corresponding confidence intervals.</p>
        <div class="alpha-controls">
          <label for="alpha">Significance level (&alpha;)</label>
          <input type="number" id="alpha" min="0.001" max="0.5" step="0.001" value="0.05">
          <div class="confidence-buttons" role="group" aria-label="Select confidence level">
            <button type="button" class="confidence-button conf-level-btn" data-level="0.90">90% Conf.</button>
            <button type="button" class="confidence-button conf-level-btn selected" data-level="0.95">95% Conf.</button>
            <button type="button" class="confidence-button conf-level-btn" data-level="0.99">99% Conf.</button>
          </div>
        </div>
      </div>
    </section>

    <section class="card advanced-card">
      <details class="advanced-details">
        <summary>Advanced analysis settings</summary>
        <div class="advanced-grid">
          <div class="advanced-block">
            <h3>Hypothesis direction</h3>
            <p class="muted">
              Choose whether the slope test is two-sided or directional. Two-sided is the safest default; one-sided tests
              are only appropriate when you truly care about movement in <em>one</em> direction.
            </p>
            <fieldset class="radio-group" aria-label="Hypothesis tail">
              <label class="radio-label">
                <input type="radio" name="hypothesis-tail" value="two-sided" checked>
                <span>Two-sided (H<sub>1</sub>: slope ≠ 0)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="hypothesis-tail" value="greater">
                <span>One-sided (H<sub>1</sub>: slope &gt; 0)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="hypothesis-tail" value="less">
                <span>One-sided (H<sub>1</sub>: slope &lt; 0)</span>
              </label>
            </fieldset>
            <p class="muted">
              Directional tests adjust the reported p-value and decision at your chosen alpha but keep confidence
              intervals two-sided for now.
            </p>
          </div>

          <div class="advanced-block">
            <h3>Robustness &amp; outliers</h3>
            <p class="muted">
              Large single-point outliers can dominate a simple regression. Use this setting as a reminder to run
              sensitivity checks and inspect diagnostics.
            </p>
            <label class="switch-option">
              <input type="checkbox" id="trim-outliers">
              <span>Exclude extreme outliers (|z| &gt; 3.5 in X or Y) before fitting</span>
            </label>
            <p class="muted">
              When checked, observations where either variable has a z-score above about 3.5 in absolute value are
              removed before estimating the line and reporting results. Use this when a few extreme points are clearly
              distorting an otherwise stable relationship.
            </p>
          </div>

          <div class="advanced-block">
            <h3>Scale &amp; transformations</h3>
            <p class="muted">
              Log scales can turn curved relationships into straighter lines and make coefficients easier to interpret as
              approximate percentage effects, but they require strictly positive values.
            </p>
            <label class="switch-option">
              <input type="checkbox" id="log-transform-x">
              <span>Log-transform predictor X (ln X)</span>
            </label>
            <label class="switch-option">
              <input type="checkbox" id="log-transform-y">
              <span>Log-transform outcome Y (ln Y)</span>
            </label>
            <p class="muted">
              Only rows with X &gt; 0 or Y &gt; 0 are used when the corresponding log option is checked; non-positive
              values are dropped. Use these transforms when the diagnostics or plots suggest a curved, multiplicative,
              or heavy-tailed relationship on the original scale.
            </p>
          </div>

          <div class="advanced-block">
            <h3>Reporting preferences</h3>
            <label class="switch-option">
              <input type="checkbox" id="report-std-slope">
              <span>Show standardized slope (β*) alongside the raw slope</span>
            </label>
            <p class="muted">
              The standardized slope rescales both X and Y to standard deviation units. It can help compare effect sizes
              across different predictors in other tools that share this pattern.
            </p>
          </div>
        </div>
      </details>
    </section>

    <section class="visual-output" aria-labelledby="visual-output-heading">
      <h2 id="visual-output-heading">VISUAL OUTPUT</h2>
      <div class="card">
        <article class="chart-card">
          <h3>Actual vs. Fitted</h3>
          <div id="actual-fitted-chart" class="chart-placeholder" role="img" aria-live="polite"
            aria-label="Scatterplot of observed outcome versus fitted (predicted) values with 45-degree (dotted) reference line."></div>
          <p id="actual-fitted-caption" class="chart-note"></p>
          <details class="interpretation-aid">
            <summary>Interpretation Aid</summary>
            <p class="muted">
              Each point is one case: x-axis is the model’s fitted (predicted) value, y-axis is the actual outcome.
              Points close to the 45&deg; line indicate good predictions; systematic curves or funnels suggest model misspecification or unequal variance.
            </p>
          </details>
        </article>
        <article class="chart-card">
          <h3>Relationship with Predictor on Outcome</h3>
          <div class="effect-controls">
            <div class="range-controls" id="effect-range-controls">
              <span>Range for focal (continuous):</span>
              <label><input type="radio" name="effect-range" value="sd" checked> Mean +/- 2 SD</label>
              <label><input type="radio" name="effect-range" value="observed"> Observed min/max</label>
              <label><input type="radio" name="effect-range" value="custom"> Custom</label>
              <div class="custom-range" id="effect-custom-range" style="display:none;">
                <label>Min <input type="number" id="effect-range-min" step="any"></label>
                <label>Max <input type="number" id="effect-range-max" step="any"></label>
              </div>
            </div>
          </div>
          <div id="effect-chart" class="chart-placeholder" role="img" aria-live="polite"
            aria-label="Predicted outcome across the predictor range."></div>
          <p id="effect-caption" class="chart-note"></p>
          <details class="interpretation-aid">
            <summary>Interpretation Aid</summary>
            <p id="effect-interpretation" class="muted"></p>
          </details>
        </article>
      </div>
    </section>

    <section class="test-results" aria-labelledby="test-results-heading">
      <h2 id="test-results-heading">TEST RESULTS</h2>

      <div class="card regression-equation-card">
        <h3>Regression Equation</h3>
        <p id="regression-equation-output" class="regression-equation-text">
          Provide data to see the fitted regression equation.
        </p>
        <p class="template-download">
          <button type="button" id="bivariate-download-results" class="secondary">
            Download fitted values &amp; residuals (CSV)
          </button>
        </p>
        <p class="hint">
          The downloaded file includes your raw paired data plus two columns: <code>y_fitted</code> (predicted outcome
          from the fitted regression line) and <code>residual</code> (actual minus predicted) for each observation.
        </p>
      </div>

      <div class="card summary-stats-card">
        <h3>Summary Statistics</h3>
        <div class="summary-stats-grid">
          <div>
            <h4>Outcome &amp; Continuous Predictor</h4>
            <table class="summary-table">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Mean</th>
                  <th>Median</th>
                  <th>Std. Dev.</th>
                  <th>Min</th>
                  <th>Max</th>
                </tr>
              </thead>
              <tbody id="numeric-summary-body">
                <tr><td colspan="6">Provide data to see numeric summaries.</td></tr>
              </tbody>
            </table>
          </div>
          <div>
            <h4>Categorical Predictor (% by level)</h4>
            <table class="summary-table">
              <thead>
                <tr>
                  <th>Predictor</th>
                  <th>Level</th>
                  <th>Percent</th>
                </tr>
              </thead>
              <tbody id="categorical-summary-body">
                <tr><td colspan="3">Provide data to see level percentages.</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="card metrics-panel">
        <div class="metric-output">
          <span>Predictor type:</span>
          <span id="metric-predictor-type" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Slope:</span>
          <span id="metric-slope" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Intercept:</span>
          <span id="metric-intercept" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>R-squared:</span>
          <span id="metric-r2" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Slope t-statistic:</span>
          <span id="metric-t" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Slope p-value:</span>
          <span id="metric-pvalue" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Model p-value:</span>
          <span id="metric-pmodel" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>RMSE:</span>
          <span id="metric-rmse" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>MAE:</span>
          <span id="metric-mae" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Residual SE:</span>
          <span id="metric-resse" class="dynamic-value">&ndash;</span>
        </div>
        <div class="metric-output">
          <span>Decision (alpha):</span>
          <span id="metric-decision" class="dynamic-value">&ndash;</span>
        </div>
        <details class="interpretation-aid">
          <summary>Interpretation Aid</summary>
          <p class="muted">
            <strong>R-squared:</strong> Share of outcome variation explained by this single predictor. Higher means the line fits the data better.
          </p>
          <p class="muted">
            <strong>Slope &amp; t / p-value:</strong> Slope shows change in outcome for one-unit change in predictor (or difference vs. reference for a binary predictor). A small p-value (below alpha) means that slope is statistically reliable.
          </p>
          <p class="muted">
            <strong>Intercept:</strong> Expected outcome when the predictor is zero (or at the reference group).
          </p>
          <p class="muted">
            <strong>Model p-value:</strong> Overall test of whether the predictor explains any variance in the outcome (same as the slope test for a one-predictor model).
          </p>
          <p class="muted">
            <strong>RMSE / MAE:</strong> Typical prediction error size. RMSE weights big errors more; MAE is a straight average of absolute errors.
          </p>
          <p class="muted">
            <strong>Residual SE:</strong> Standard deviation of residuals (uses degrees of freedom), a classic “standard error of the regression.”
          </p>
          <p class="muted">
            <strong>Decision (alpha):</strong> An easy yes/no cue based on the chosen significance level.
          </p>
        </details>
      </div>

      <div class="dual-panels">
        <article class="card dual-panel">
          <h3>APA-Style Statistical Reporting</h3>
          <p id="apa-report"></p>
        </article>
        <article class="card dual-panel">
          <h3>Managerial Interpretation</h3>
          <p id="managerial-report"></p>
        </article>
      </div>

      <div class="card summary-section">
        <h3>Summary of Estimates</h3>
        <table class="summary-table">
          <thead>
            <tr>
              <th>Parameter</th>
              <th>Level / Term</th>
              <th>Estimate</th>
              <th>Standard Error</th>
              <th>t</th>
              <th>p-value</th>
              <th id="summary-ci-lower-header">Lower Bound</th>
              <th id="summary-ci-upper-header">Upper Bound</th>
            </tr>
          </thead>
          <tbody id="summary-table-body">
            <tr>
              <td colspan="8">Provide summary statistics or upload data to see parameter estimates.</td>
            </tr>
          </tbody>
        </table>
        <p id="summary-ci-note" class="muted"></p>
        <details class="interpretation-aid">
          <summary>Interpretation Aid</summary>
          <div id="coef-interpretation" class="muted"></div>
        </details>
      </div>
    </section>

    <section class="diagnostics-section">
      <h2>DIAGNOSTICS &amp; ASSUMPTIONS</h2>
      <div class="card">
        <details class="diagnostics-details">
          <summary>Diagnostics &amp; Assumption Checks</summary>
          <div id="diagnostics-content">
            <p class="muted">
              Run the analysis to see checks on linearity, influential points, variance patterns, and normality of residuals.
              Use these as prompts for plots and follow-up modeling, not as strict pass/fail gates.
            </p>
            <div class="chart-card">
              <h4>Residuals vs. Fitted</h4>
              <div id="residuals-chart" class="chart-placeholder" role="img" aria-live="polite"
                aria-label="Residuals versus fitted values with zero reference line."></div>
              <p id="residuals-caption" class="chart-note"></p>
            </div>
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p class="page-timestamps">Created: <span id="created-date"></span> &middot; Last updated: <span id="modified-date"></span></p>
    <p><a href="../../index.html">Back to Stat Analysis Selection</a></p>
    <p class="citation">
      Cite as: Baker, Andrew. (2025). Bivariate Linear Regression Tool. Marketing Bivariate Tools.
      https://github.com/andre/mktg_bivariate_tools/apps/bivariate_regression/main_bivariate_regression.html
    </p>
  </footer>

  <script src="../../../shared/js/csv_utils.js"></script>
  <script src="../../../shared/js/stats_utils.js"></script>
  <script src="../../../shared/js/ui_utils.js"></script>
  <script src="../../../shared/js/fan_chart_utils.js"></script>
  <script src="../../../shared/js/stacked_bar_utils.js"></script>
  <script src="../../../shared/js/auth_tracking.js"></script>
  <script src="../../../shared/js/auth_bar.js"></script>
  <script src="bivariate_app.js"></script>
</body>

</html>
