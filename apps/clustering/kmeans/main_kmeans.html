<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>k-Means Clustering Explorer</title>
  <!-- Shared design system -->
  <link rel="stylesheet" href="../../../shared/css/main.css">
    <script src="../../../shared/js/tracking.js"></script>
  <link rel="stylesheet" href="../../../shared/css/auth_bar.css">
  <!-- App-specific overrides -->
  <link rel="stylesheet" href="main_kmeans.css">
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <script src="../../../shared/js/csv_utils.js"></script>
  <script src="../../../shared/js/ui_utils.js"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-290ZJ9RE04"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-290ZJ9RE04');
    </script>
</head><body>
  <div class="auth-bar">
    <div class="auth-bar__container">
      <div></div>
      <div id="auth-bar-content" class="auth-bar__links">
        <a href="../../login.html">Login</a>
        <a href="../../register.html">Create Account</a>
      </div>
    </div>
  </div>
  <main class="app-main">
    <header class="intro hero-header">
      <div class="hero-header__top">
        <h1>k-Means Clustering Explorer</h1>
        <div class="hero-context">
          <span class="badge">Segmentation tool</span>
        </div>
      </div>
      <p class="hero-header__lede">
        Explore customer or campaign segments using k-means clustering. Upload numeric data or use a demo dataset,
        choose how many clusters to search for, and see how different values of <em>k</em> change the group structure.
      </p>
    </header>

    <section class="test-overview" aria-labelledby="test-overview-heading">
      <h2 id="test-overview-heading">OVERVIEW &amp; OBJECTIVE</h2>
      <div class="card">
        <p>
          k-means is an exploratory technique that partitions observations into <em>k</em> clusters so that points in the
          same cluster are close together and clusters are far apart. It requires numeric features and works best when
          clusters are roughly spherical in the feature space.
        </p>
        <p class="equation">
          $$\min_{\{C_j,\ \mu_j\}} \sum_{j=1}^{k} \sum_{x_i \in C_j} \lVert x_i - \mu_j \rVert^2$$
        </p>
        <p>
          where \(C_j\) is the set of observations assigned to cluster \(j\) and \(\mu_j\) is that cluster&rsquo;s
          centroid (mean vector). This tool lets you adjust the number of clusters and see within-cluster variation,
          elbow and silhouette diagnostics, and plain-language summaries.
        </p>
        <details class="intro-notes" open>
          <summary>Additional notes &amp; assumptions</summary>
          <p>
            k-means assumes numeric, reasonably scaled features. It is sensitive to outliers and feature scales, so
            consider standardizing variables (mean&nbsp;0, sd&nbsp;1) before clustering. Results are exploratory and
            should be interpreted alongside business context, not as definitive &ldquo;truth.&rdquo;
          </p>
        </details>
      </div>
    </section>

    <section class="scenario-section" aria-labelledby="scenario-heading">
      <h2 id="scenario-heading">MARKETING SCENARIOS</h2>
      <div class="card">
        <div class="scenario-controls">
          <label for="scenario-select">Practical scenario</label>
          <div class="scenario-controls__input">
            <select id="scenario-select">
              <option value="">Manual inputs (no preset)</option>
            </select>
            <button id="scenario-download" class="secondary hidden" type="button" disabled>Download scenario dataset</button>
          </div>
        </div>
        <div id="scenario-description">
          <p>
            Use presets to load example segmentation datasets (such as customers with revenue and engagement metrics or
            campaigns with spend and response). You can download the scenario data to tweak it in Excel or Numbers and
            then re-upload.
          </p>
        </div>
      </div>
    </section>

    <section class="input-card" aria-labelledby="inputs-heading">
      <h2 id="inputs-heading">INPUTS &amp; SETTINGS</h2>
      <article class="card data-entry-card">
        <div class="input-header">
          <h3>Load data &amp; choose features</h3>
        </div>

        <div class="mode-toggle" role="tablist" aria-label="Data source">
          <button type="button" class="mode-button active" data-mode="upload">Upload CSV data</button>
          <button type="button" class="mode-button" data-mode="demo">Use demo dataset</button>
        </div>

        <div class="mode-panels">
          <div class="mode-panel active" data-mode="upload" id="kmeans-upload-panel">
            <div class="data-import-block">
              <h4>Upload numeric CSV data</h4>
              <p>
                Provide a header row and numeric columns only (up to 5,000 observations). After upload you can choose
                which variables to include in the clustering and which to plot on the chart.
              </p>
              <div class="upload-dropzone" id="kmeans-raw-dropzone" tabindex="0">
                <input id="kmeans-raw-input" type="file"
                  accept=".csv,.tsv,text/csv,text/tab-separated-values,application/vnd.ms-excel"
                  aria-label="Upload raw CSV">
                <p>Drop a CSV/TSV here, or <button type="button" id="kmeans-raw-browse" class="linklike">browse
                    files</button>.</p>
              </div>
              <p class="upload-feedback" id="kmeans-raw-feedback" aria-live="polite"></p>
            </div>
          </div>

          <div class="mode-panel" data-mode="demo" id="kmeans-demo-panel">
            <div class="data-import-block">
              <h4>Use a demo segmentation dataset</h4>
              <p>
                Load a synthetic marketing dataset with multiple clusters (for example, low/medium/high value customers)
                to explore the tool without uploading your own file.
              </p>
              <button type="button" id="kmeans-load-demo" class="primary">Load demo dataset</button>
              <p class="upload-feedback" id="kmeans-demo-feedback" aria-live="polite"></p>
            </div>
          </div>
        </div>

        <hr class="section-divider">

        <div class="input-grid kmeans-feature-grid">
          <div>
            <h4>Feature selection</h4>
            <p class="hint">Choose which numeric columns are used to form clusters.</p>
            <div id="kmeans-feature-checkboxes" class="feature-checkboxes">
              <!-- Populated by JS after data load -->
            </div>
          </div>
          <div>
            <h4>Plot axes</h4>
            <p class="hint">Pick two variables for the scatterplot (x and y).</p>
            <label for="kmeans-x-var">X-axis variable</label>
            <select id="kmeans-x-var"></select>
            <label for="kmeans-y-var">Y-axis variable</label>
            <select id="kmeans-y-var"></select>
          </div>
            <div>
              <h4>Preprocessing &amp; clustering</h4>
            <label for="kmeans-scale-mode">Feature scaling</label>
            <select id="kmeans-scale-mode">
              <option value="none">None &mdash; use original metrics</option>
              <option value="zscore" selected>Standardize (z-scores: mean 0, sd 1)</option>
              <option value="minmax">Rescale each feature to 0&ndash;100 (min/max based)</option>
            </select>
            <label for="kmeans-k">Number of clusters (k)</label>
            <input type="number" id="kmeans-k" min="2" max="12" step="1" value="3">
            <label for="kmeans-k-min">Range for diagnostics (min–max k)</label>
            <div class="input-inline">
              <input type="number" id="kmeans-k-min" min="2" max="12" step="1" value="2">
              <span class="inline-separator">to</span>
              <input type="number" id="kmeans-k-max" min="2" max="12" step="1" value="8">
            </div>
            <button type="button" id="kmeans-run" class="primary">Run clustering &amp; update charts</button>
          </div>
        </div>

        <div class="input-group">
          <details class="advanced-details">
            <summary>Additional info &amp; guidance</summary>
            <p>
              Start with a small range of clusters (for example, 2–8) and look at the elbow and silhouette charts to
              decide on a reasonable value of <em>k</em>. Extremely large <em>k</em> can overfit noise and create tiny
              clusters that are hard to interpret.
            </p>
            <p>
              You can change the standardization option to see how feature scaling impacts cluster assignments, which is
              especially important when some variables are on very different scales (for example, annual revenue vs.
              satisfaction scores).
            </p>
          </details>
        </div>
      </article>
    </section>

    <section class="visual-output" aria-labelledby="visual-output-heading">
      <h2 id="visual-output-heading">VISUAL OUTPUT</h2>
      <div class="card">
        <div class="chart-grid">
          <article class="chart-card">
            <h3>Cluster map (scatterplot)</h3>
            <div class="chart-placeholder" id="kmeans-scatter"></div>
            <p class="chart-note">
              Each point is an observation colored by cluster membership, plotted using the selected x and y variables.
              Centroids are shown as larger markers. The underlying clustering uses all selected features (after any
              chosen scaling), but the axes on this chart always show the variables in their original units. This means
              the map is a 2D or 3D projection: clusters that overlap visually on these axes may still differ on other
              variables included in the model.
            </p>
          </article>
          <article class="chart-card">
            <h3>Elbow chart (within-cluster variation)</h3>
            <div class="chart-placeholder" id="kmeans-elbow"></div>
            <p class="chart-note">
              Plots total within-cluster sum of squares (WCSS) versus <em>k</em>. Look for an &ldquo;elbow&rdquo; where
              additional clusters give diminishing returns.
            </p>
          </article>
        </div>
        <div class="card visual-output-settings">
          <details>
            <summary>Advanced visualization settings</summary>
            <div class="visual-settings-grid">
              <fieldset class="dim-mode">
                <legend>Cluster map dimensions</legend>
                <label class="switch-option">
                  <input type="radio" name="kmeans-dim-mode" value="2d" checked>
                  <span>2D (X vs Y)</span>
                </label>
                <label class="switch-option">
                  <input type="radio" name="kmeans-dim-mode" value="3d">
                  <span>3D (X, Y, Z)</span>
                </label>
              </fieldset>
              <div class="z-axis-settings">
                <label for="kmeans-z-var">Z-axis variable (for 3D)</label>
                <select id="kmeans-z-var"></select>
              </div>
              <div class="sampling-settings">
                <label for="kmeans-sample-fraction">Show only a random subset of points</label>
                <select id="kmeans-sample-fraction">
                  <option value="1" selected>Show 100% of points</option>
                  <option value="0.5">Show 50% of points</option>
                  <option value="0.25">Show 25% of points</option>
                  <option value="0.1">Show 10% of points</option>
                </select>
                <p class="hint">
                  Subsampling can make dense plots easier to read when you have many observations. When you show only a
                  random subset of points, the clusters and centroids are still based on the full dataset.
                </p>
              </div>
            </div>
          </details>
        </div>
      </div>
      <div class="card">
        <div class="chart-grid">
          <article class="chart-card">
            <h3>Silhouette diagnostics</h3>
            <div class="chart-placeholder" id="kmeans-silhouette"></div>
            <p class="chart-note" id="kmeans-silhouette-note">
              Shows the average silhouette score for the current choice of <em>k</em>. Silhouette values range from
              -1 to 1: values near 1 indicate observations are much closer to their own cluster than to others (clear,
              well-separated segments), values near 0 indicate overlapping or ambiguous boundaries, and negative values
              suggest some observations fit better in a different cluster.
            </p>
          </article>
        </div>
      </div>
    </section>

    <section class="test-results" aria-labelledby="test-results-heading">
      <h2 id="test-results-heading">CLUSTER SUMMARY</h2>
      <div class="card metrics-panel">
        <div class="metric-output">Number of clusters (k): <span id="kmeans-metric-k">&ndash;</span></div>
        <div class="metric-output">Total within-cluster SS: <span id="kmeans-metric-wcss">&ndash;</span></div>
        <div class="metric-output">Average silhouette (k): <span id="kmeans-metric-silhouette">&ndash;</span></div>
        <div class="metric-output">Largest cluster size: <span id="kmeans-metric-max-cluster">&ndash;</span></div>
      </div>
      <div class="dual-panels">
        <article class="card dual-panel">
          <h3>APA-Style Report</h3>
          <p id="apa-report">
            After you run k-means, this panel will describe the clustering solution in a more formal statistical style,
            including the number of clusters, within-cluster variation, and basic diagnostics.
          </p>
        </article>
        <article class="card dual-panel">
          <h3>Managerial Interpretation</h3>
          <p id="managerial-report">
            This panel translates the clustering into plain language, highlighting how many customer or campaign
            segments were found, how they differ on key variables, and how actionable the segments appear.
          </p>
        </article>
      </div>
      <div class="card summary-table-card">
        <h3>Cluster profile table</h3>
        <p class="hint">
          Use this table to understand how each segment differs in practical terms. The feature means describe the
          typical values within a cluster (for example, average spend or average engagement level). The
          within-cluster standard deviations show how variable each feature is inside that segment&mdash;small values
          mean members are similar on that metric, while large values mean the segment is more heterogeneous. The
          average distance to the centroid summarizes the overall tightness of the segment across all features;
          smaller distances indicate more internally consistent, well-defined clusters that are easier to describe and
          target.
        </p>
          <table class="summary-table">
            <thead>
              <tr>
                <th>Cluster</th>
                <th>Size</th>
                <th>Feature means</th>
                <th>Within-cluster standard deviations</th>
                <th>Avg distance to centroid</th>
              </tr>
            </thead>
            <tbody id="kmeans-cluster-table-body">
              <tr>
              <td colspan="5">Run clustering to see cluster profiles here.</td>
              </tr>
          </tbody>
        </table>
        <p class="template-download">
          <button type="button" id="kmeans-download-results" class="secondary">
            Download clustered dataset (CSV)
          </button>
        </p>
        <p class="hint">
          The downloaded file includes your original numeric columns plus a <code>cluster_id</code> for each
          observation and its <code>distance_to_centroid</code> (how far it sits from the center of its assigned
          cluster based on the selected features).
        </p>
      </div>
    </section>

    <section class="diagnostics-section" aria-labelledby="diagnostics-heading">
      <h2 id="diagnostics-heading">DIAGNOSTICS &amp; ASSUMPTIONS</h2>
      <div class="card">
        <details class="diagnostics-details">
          <summary>Diagnostics &amp; assumptions</summary>
          <div id="diagnostics-content">
            <p>
              The tool will flag potential issues such as very small clusters, extreme outliers, or highly imbalanced
              cluster sizes. Use these diagnostics to decide whether to simplify the feature set, change <em>k</em>, or
              reconsider using k-means for this dataset.
            </p>
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer class="app-footer">
        <div class="footer-content">
            <div class="footer-nav">
                <a href="../../../index.html" class="back-link">← Back to Tool Selection</a>
            </div>
            <div class="footer-meta">
                <span class="meta-item">Created: 2025-11-21</span>
                <span class="separator">•</span>
                <span class="meta-item">Last Updated: 2025-02-23</span>
            </div>
            <div class="footer-citation">
                <div class="citation-label">Cite this tool:</div>
                <div class="citation-text">Baker, A. (2025). k-Means Clustering Explorer. <em>Dr. Baker's Marketing Tools</em>. Retrieved from <a href="https://drbakermarketing.com/apps/clustering/kmeans/main_kmeans.html" target="_blank">https://drbakermarketing.com/apps/clustering/kmeans/main_kmeans.html</a></div>
            </div>
            <div class="footer-copyright">
                &copy; 2025 Andrew Baker. All rights reserved.
            </div>
        </div>
    </footer>

  <script src="../../../shared/js/auth_tracking.js"></script>
  <script src="../../../shared/js/auth_bar.js"></script>
  <script src="../../../shared/js/quiz_utils.js"></script>
  <script src="main_kmeans.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      initQuizButton('kmeans');
    });
  </script>
</body>

</html>
